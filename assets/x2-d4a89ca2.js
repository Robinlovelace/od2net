import{S as te,i as ne,s as ae,G as ue,e as C,h as I,z as F,l as S,I as V,q as B,J as ce,K as pe,N as de,O as me,t as w,b as y,v as q,w as ge,Q as _e,R as be,T as W,U as Z,m as he,L as we,c as D,a as J,d as N,o as Le,H as ve,x as H,y as K,f as E,g as Q,n as h,A as U,r as X,u as Y,M as ye,_ as ke,V as se,j as $,E as le,D as Ce,W as Me}from"./Legend-52595ab8.js";import{C as ze,_ as Be,J as Ee,a as Ie,G as Se}from"./CostFunction-88c358f3.js";import{S as qe,L as De}from"./SidebarControls-958a55ca.js";function Je(a){let e,n,s,t,o,u,d;const l=a[16].default,r=ue(l,a,a[15],null);return{c(){e=C("div"),r&&r.c(),I(e,"tabindex",n=a[1]?0:void 0),I(e,"role",s=a[1]?"button":void 0),F(e,"z-index",a[2])},m(c,m){S(c,e,m),r&&r.m(e,null),o=!0,u||(d=[V(a[6].call(null,e)),V(t=Ne.call(null,e,a[0])),B(e,"click",a[17]),B(e,"dblclick",a[18]),B(e,"contextmenu",a[19]),B(e,"mouseenter",a[20]),B(e,"mouseleave",a[21]),B(e,"mousemove",a[22]),B(e,"keydown",a[7])],u=!0)},p(c,[m]){r&&r.p&&(!o||m&32768)&&ce(r,l,c,c[15],o?de(l,c[15],m,null):pe(c[15]),null),(!o||m&2&&n!==(n=c[1]?0:void 0))&&I(e,"tabindex",n),(!o||m&2&&s!==(s=c[1]?"button":void 0))&&I(e,"role",s),t&&me(t.update)&&m&1&&t.update.call(null,c[0]),m&4&&F(e,"z-index",c[2])},i(c){o||(w(r,c),o=!0)},o(c){y(r,c),o=!1},d(c){c&&q(e),r&&r.d(c),u=!1,ge(d)}}}function Ne(a,e){const n=a.className;function s(t){t?a.className=`${n} ${t}`:a.className=n}return s(e),{update:s}}function Oe(a,e,n){let s,t,o,{$$slots:u={},$$scope:d}=e,{lngLat:l}=e,{class:r=void 0}=e,{interactive:c=!0}=e,{asButton:m=!1}=e,{draggable:b=!1}=e,{feature:v=null}=e,{offset:k=void 0}=e,{zIndex:g=void 0}=e;const L=_e(),{map:M,layerEvent:O,self:P}=be();W(a,M,f=>n(24,o=f)),W(a,O,f=>n(23,s=f)),W(a,P,f=>n(14,t=f));function j(f){Z(P,t=new he.Marker({element:f,draggable:b,offset:k}).setLngLat(l).addTo(o),t);const A=()=>i("dragstart"),R=()=>{_(),i("drag")},T=()=>{_(),i("dragend")};return b&&(t.on("dragstart",A),t.on("drag",R),t.on("dragend",T)),{destroy(){b&&(t==null||t.off("dragstart",A),t==null||t.off("drag",R),t==null||t.off("dragend",T)),t==null||t.remove()}}}function _(){let f=t==null?void 0:t.getLngLat();f&&(Array.isArray(l)?n(9,l=[f.lng,f.lat]):l&&"lon"in l?n(9,l={lon:f.lng,lat:f.lat}):n(9,l=f))}function p(f){f.key===" "&&(f.preventDefault(),f.stopPropagation(),i("click"))}function i(f){if(!c)return;let A=t==null?void 0:t.getLngLat();if(!A)return;const R=[A.lng,A.lat];let T={map:o,marker:t,lngLat:R,features:[{type:"Feature",properties:(v==null?void 0:v.properties)??{},geometry:{type:"Point",coordinates:R}}]};Z(O,s={...T,layerType:"marker",type:f},s),L(f,T)}const z=()=>i("click"),G=()=>i("dblclick"),oe=()=>i("contextmenu"),ie=f=>{i("mouseenter")},re=()=>{i("mouseleave")},fe=()=>i("mousemove");return a.$$set=f=>{"lngLat"in f&&n(9,l=f.lngLat),"class"in f&&n(0,r=f.class),"interactive"in f&&n(10,c=f.interactive),"asButton"in f&&n(1,m=f.asButton),"draggable"in f&&n(11,b=f.draggable),"feature"in f&&n(12,v=f.feature),"offset"in f&&n(13,k=f.offset),"zIndex"in f&&n(2,g=f.zIndex),"$$scope"in f&&n(15,d=f.$$scope)},a.$$.update=()=>{a.$$.dirty&16896&&(t==null||t.setLngLat(l)),a.$$.dirty&24576&&(t==null||t.setOffset(k??[0,0]))},[r,m,g,M,O,P,j,p,i,l,c,b,v,k,t,d,u,z,G,oe,ie,re,fe]}class Pe extends te{constructor(e){super(),ne(this,e,Oe,Je,ae,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2})}}const je='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>';function x(a){let e,n,s,t,o,u,d,l,r,c,m,b;function v(g){a[16](g)}let k={};return a[2]!==void 0&&(k.cost=a[2]),l=new Ie({props:k}),H.push(()=>K(l,"cost",v)),{c(){e=C("div"),n=C("label"),s=Q("Max requests (limit for faster updates):"),t=C("br"),o=E(),u=C("input"),d=E(),D(l.$$.fragment),I(u,"type","number"),I(u,"min",1)},m(g,L){S(g,e,L),h(e,n),h(n,s),h(n,t),h(n,o),h(n,u),$(u,a[1]),S(g,d,L),J(l,g,L),c=!0,m||(b=B(u,"input",a[15]),m=!0)},p(g,L){L&2&&se(u.value)!==g[1]&&$(u,g[1]);const M={};!r&&L&4&&(r=!0,M.cost=g[2],U(()=>r=!1)),l.$set(M)},i(g){c||(w(l.$$.fragment,g),c=!0)},o(g){y(l.$$.fragment,g),c=!1},d(g){g&&(q(e),q(d)),N(l,g),m=!1,b()}}}function ee(a){let e,n,s,t;return s=new qe({props:{outputMetadata:a[6].metadata,map:a[3],controls:a[8]}}),{c(){e=C("hr"),n=E(),D(s.$$.fragment)},m(o,u){S(o,e,u),S(o,n,u),J(s,o,u),t=!0},p(o,u){const d={};u&64&&(d.outputMetadata=o[6].metadata),u&8&&(d.map=o[3]),s.$set(d)},i(o){t||(w(s.$$.fragment,o),t=!0)},o(o){y(s.$$.fragment,o),t=!1},d(o){o&&(q(e),q(n)),N(s,o)}}}function Ae(a){let e,n,s,t,o,u,d,l,r,c,m,b,v,k,g,L,M,O;n=new ve({props:{app:"interactive"}});function P(i){a[14](i)}let j={};a[0]!==void 0&&(j.example=a[0]),b=new ze({props:j}),H.push(()=>K(b,"example",P));let _=a[4]&&x(a),p=a[6].metadata&&ee(a);return{c(){e=C("div"),D(n.$$.fragment),s=E(),t=C("label"),o=Q("Open a "),u=C("i"),u.textContent=".bin",d=Q(" network file or an "),l=C("i"),l.textContent=".osm.pbf",r=E(),c=C("input"),m=E(),D(b.$$.fragment),k=E(),_&&_.c(),g=E(),p&&p.c(),I(c,"type","file"),I(e,"slot","left")},m(i,z){S(i,e,z),J(n,e,null),h(e,s),h(e,t),h(t,o),h(t,u),h(t,d),h(t,l),h(t,r),h(t,c),a[13](c),h(e,m),J(b,e,null),h(e,k),_&&_.m(e,null),h(e,g),p&&p.m(e,null),L=!0,M||(O=B(c,"change",a[9]),M=!0)},p(i,z){const G={};!v&&z&1&&(v=!0,G.example=i[0],U(()=>v=!1)),b.$set(G),i[4]?_?(_.p(i,z),z&16&&w(_,1)):(_=x(i),_.c(),w(_,1),_.m(e,g)):_&&(X(),y(_,1,1,()=>{_=null}),Y()),i[6].metadata?p?(p.p(i,z),z&64&&w(p,1)):(p=ee(i),p.c(),w(p,1),p.m(e,null)):p&&(X(),y(p,1,1,()=>{p=null}),Y())},i(i){L||(w(n.$$.fragment,i),w(b.$$.fragment,i),w(_),w(p),L=!0)},o(i){y(n.$$.fragment,i),y(b.$$.fragment,i),y(_),y(p),L=!1},d(i){i&&q(e),N(n),a[13](null),N(b),_&&_.d(),p&&p.d(),M=!1,O()}}}function Re(a){let e,n;return{c(){e=new Me(!1),n=Ce(),e.a=n},m(s,t){e.m(je,s,t),S(s,n,t)},p:le,d(s){s&&(q(n),e.d())}}}function Te(a){let e,n;return e=new De({props:{controls:a[8]}}),{c(){D(e.$$.fragment)},m(s,t){J(e,s,t),n=!0},p:le,i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Fe(a){let e,n,s,t,o;function u(l){a[11](l)}let d={draggable:!0,$$slots:{default:[Re]},$$scope:{ctx:a}};return a[5]!==void 0&&(d.lngLat=a[5]),e=new Pe({props:d}),H.push(()=>K(e,"lngLat",u)),e.$on("dragend",a[10]),t=new Se({props:{data:a[6],$$slots:{default:[Te]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment),s=E(),D(t.$$.fragment)},m(l,r){J(e,l,r),S(l,s,r),J(t,l,r),o=!0},p(l,r){const c={};r&524288&&(c.$$scope={dirty:r,ctx:l}),!n&&r&32&&(n=!0,c.lngLat=l[5],U(()=>n=!1)),e.$set(c);const m={};r&64&&(m.data=l[6]),r&524288&&(m.$$scope={dirty:r,ctx:l}),t.$set(m)},i(l){o||(w(e.$$.fragment,l),w(t.$$.fragment,l),o=!0)},o(l){y(e.$$.fragment,l),y(t.$$.fragment,l),o=!1},d(l){l&&q(s),N(e,l),N(t,l)}}}function He(a){let e,n,s,t;function o(d){a[12](d)}let u={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Fe]},$$scope:{ctx:a}};return a[3]!==void 0&&(u.map=a[3]),n=new ye({props:u}),H.push(()=>K(n,"map",o)),{c(){e=C("div"),D(n.$$.fragment),I(e,"slot","main"),F(e,"position","relative"),F(e,"width","100%"),F(e,"height","100vh")},m(d,l){S(d,e,l),J(n,e,null),t=!0},p(d,l){const r={};l&524384&&(r.$$scope={dirty:l,ctx:d}),!s&&l&8&&(s=!0,r.map=d[3],U(()=>s=!1)),n.$set(r)},i(d){t||(w(n.$$.fragment,d),t=!0)},o(d){y(n.$$.fragment,d),t=!1},d(d){d&&q(e),N(n)}}}function Ge(a){let e,n;return e=new we({props:{$$slots:{main:[He],left:[Ae]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment)},m(s,t){J(e,s,t),n=!0},p(s,[t]){const o={};t&524543&&(o.$$scope={dirty:t,ctx:s}),e.$set(o)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Ke(a,e,n){Le(async()=>{await Be(),await ke()});let s,t,o="",u={lng:0,lat:0},d={type:"FeatureCollection",features:[]},l=1e3,r="Distance",c={maxCount:1e3,originRadius:3,destinationRadius:3,streetviewOn:!1},m;async function b(p){n(0,o=""),v(await m.files[0].arrayBuffer())}function v(p){try{n(4,t=new Ee(new Uint8Array(p)));let i=t.getBounds();s.fitBounds([[i[0],i[1]],[i[2],i[3]]],{padding:20,animate:!1}),n(5,u.lng=(i[0]+i[2])/2,u),n(5,u.lat=(i[1]+i[3])/2,u),g()}catch(i){window.alert(`Problem loading network file: ${i}`)}}async function k(p){if(p!=""){let i=await fetch(`https://assets.od2net.org/pbf_clips/${p}.osm.pbf`);v(await i.arrayBuffer())}}function g(){t&&n(6,d=JSON.parse(t.recalculate({lng:u.lng,lat:u.lat,max_requests:l,cost:r})))}function L(p){u=p,n(5,u)}function M(p){s=p,n(3,s)}function O(p){H[p?"unshift":"push"](()=>{m=p,n(7,m)})}function P(p){o=p,n(0,o)}function j(){l=se(this.value),n(1,l)}function _(p){r=p,n(2,r)}return a.$$.update=()=>{a.$$.dirty&1&&k(o),a.$$.dirty&6&&g()},[o,l,r,s,t,u,d,m,c,b,g,L,M,O,P,j,_]}class Ue extends te{constructor(e){super(),ne(this,e,Ke,Ge,ae,{})}}new Ue({target:document.getElementById("app")});
