import{af as ke,ag as Se,S as be,i as ge,s as te,D as ne,l as T,t as E,r as de,b as Z,u as we,v as A,ah as ve,T as Y,a7 as je,U as Q,ai as ie,E as x,G as Te,J as Ae,K as Oe,N as Me,Y as Ie,e as p,g as re,f as oe,j as B,k as Fe,n as k,p as _e,q as G,C as Be,V as z,ab as K,ac as ye,aa as Ce,h as W,w as me,a6 as Ee}from"./Legend-52595ab8.js";function We(t,e,n,r,o){let i=!1;t.getSource(e)&&(i=!0,t.removeSource(e));const _=()=>{r(e)&&(t.addSource(e,n),o())};if(i){const s=()=>{e&&(t.getSource(e)?setTimeout(s,1):_())};s()}else _()}function Le(t,e,n){ke().then(()=>{let r=Se(t);if(!r)return;r.getSource(e)===n&&r.removeSource(e)})}function ce(t){let e=t[0],n,r,o=se(t);return{c(){o.c(),n=ne()},m(i,_){o.m(i,_),T(i,n,_),r=!0},p(i,_){_&1&&te(e,e=i[0])?(de(),Z(o,1,1,x),we(),o=se(i),o.c(),E(o,1),o.m(n.parentNode,n)):o.p(i,_)},i(i){r||(E(o),r=!0)},o(i){Z(o),r=!1},d(i){i&&A(n),o.d(i)}}}function se(t){let e;const n=t[15].default,r=Te(n,t,t[14],null);return{c(){r&&r.c()},m(o,i){r&&r.m(o,i),e=!0},p(o,i){r&&r.p&&(!e||i&16384)&&Ae(r,n,o,o[14],e?Me(n,o[14],i,null):Oe(o[14]),null)},i(o){e||(E(r,o),e=!0)},o(o){Z(r,o),e=!1},d(o){r&&r.d(o)}}}function Ne(t){let e,n,r=t[0]&&ce(t);return{c(){r&&r.c(),e=ne()},m(o,i){r&&r.m(o,i),T(o,e,i),n=!0},p(o,[i]){o[0]?r?(r.p(o,i),i&1&&E(r,1)):(r=ce(o),r.c(),E(r,1),r.m(e.parentNode,e)):r&&(de(),Z(r,1,1,()=>{r=null}),we())},i(o){n||(E(r),n=!0)},o(o){Z(r),n=!1},d(o){o&&A(e),r&&r.d(o)}}}function De(t,e,n){let r,o,i,{$$slots:_={},$$scope:s}=e,{id:f=Ie("geojson")}=e,{data:g}=e,{generateId:b=!1}=e,{promoteId:h=void 0}=e,{filter:O=void 0}=e,{lineMetrics:w=void 0}=e,{cluster:u=void 0}=e;const{map:m,cluster:S,self:J}=ve();Y(t,m,d=>n(13,o=d)),Y(t,S,d=>n(16,i=d)),Y(t,J,d=>n(0,r=d));let v,P=!0;return je(()=>{r&&v&&o&&(Le(m,r,v),Q(J,r=null,r),n(11,v=void 0))}),t.$$set=d=>{"id"in d&&n(4,f=d.id),"data"in d&&n(5,g=d.data),"generateId"in d&&n(6,b=d.generateId),"promoteId"in d&&n(7,h=d.promoteId),"filter"in d&&n(8,O=d.filter),"lineMetrics"in d&&n(9,w=d.lineMetrics),"cluster"in d&&n(10,u=d.cluster),"$$scope"in d&&n(14,s=d.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&Q(S,i=u,i),t.$$.dirty&12273&&o&&r!==f&&(Q(J,r=f,r),We(o,r,ie({type:"geojson",data:g,filter:O,lineMetrics:w,generateId:b,promoteId:h,cluster:!!u,clusterMinPoints:u==null?void 0:u.minPoints,clusterMaxZoom:u==null?void 0:u.maxZoom,clusterRadius:u==null?void 0:u.radius,clusterProperties:u==null?void 0:u.properties}),d=>o&&d===r,()=>{r&&(n(11,v=o==null?void 0:o.getSource(r)),n(12,P=!0))})),t.$$.dirty&8208&&(o==null||o.on("style.load",()=>{n(11,v=o==null?void 0:o.getSource(f))})),t.$$.dirty&6176&&v&&(P?n(12,P=!1):v.setData(g)),t.$$.dirty&3072&&(v==null||v.setClusterOptions(ie({cluster:!!u,clusterMaxZoom:u==null?void 0:u.maxZoom,clusterRadius:u==null?void 0:u.radius})))},[r,m,S,J,f,g,b,h,O,w,u,v,P,o,s,_]}class xe extends be{constructor(e){super(),ge(this,e,De,Ne,te,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}let l;const he=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&he.decode();let N=null;function q(){return(N===null||N.byteLength===0)&&(N=new Uint8Array(l.memory.buffer)),N}function F(t,e){return t=t>>>0,he.decode(q().subarray(t,t+e))}const j=new Array(128).fill(void 0);j.push(void 0,null,!0,!1);let H=j.length;function a(t){H===j.length&&j.push(j.length+1);const e=H;return H=j[e],j[e]=t,e}function c(t){return j[t]}let C=0;const V=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Re=typeof V.encodeInto=="function"?function(t,e){return V.encodeInto(t,e)}:function(t,e){const n=V.encode(t);return e.set(n),{read:t.length,written:n.length}};function X(t,e,n){if(n===void 0){const s=V.encode(t),f=e(s.length,1)>>>0;return q().subarray(f,f+s.length).set(s),C=s.length,f}let r=t.length,o=e(r,1)>>>0;const i=q();let _=0;for(;_<r;_++){const s=t.charCodeAt(_);if(s>127)break;i[o+_]=s}if(_!==r){_!==0&&(t=t.slice(_)),o=n(o,r,r=_+t.length*3,1)>>>0;const s=q().subarray(o+_,o+r),f=Re(t,s);_+=f.written}return C=_,o}function L(t){return t==null}let D=null;function y(){return(D===null||D.byteLength===0)&&(D=new Int32Array(l.memory.buffer)),D}function Ue(t){t<132||(j[t]=H,H=t)}function M(t){const e=c(t);return Ue(t),e}let R=null;function pe(){return(R===null||R.byteLength===0)&&(R=new Float64Array(l.memory.buffer)),R}let U=null;function qe(){return(U===null||U.byteLength===0)&&(U=new BigInt64Array(l.memory.buffer)),U}function $(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const o=t.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=t.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(t)){const o=t.length;let i="[";o>0&&(i+=$(t[0]));for(let _=1;_<o;_++)i+=", "+$(t[_]);return i+="]",i}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function He(t,e){const n=e(t.length*1,1)>>>0;return q().set(t,n/1),C=t.length,n}function Ze(t,e){return t=t>>>0,pe().subarray(t/8,t/8+e)}function I(t,e){try{return t.apply(this,e)}catch(n){l.__wbindgen_exn_store(a(n))}}class ee{static __wrap(e){e=e>>>0;const n=Object.create(ee.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();l.__wbg_jsnetwork_free(e)}constructor(e){try{const i=l.__wbindgen_add_to_stack_pointer(-16),_=He(e,l.__wbindgen_malloc),s=C;l.jsnetwork_new(i,_,s);var n=y()[i/4+0],r=y()[i/4+1],o=y()[i/4+2];if(o)throw M(r);return ee.__wrap(n)}finally{l.__wbindgen_add_to_stack_pointer(16)}}recalculate(e){let n,r;try{const b=l.__wbindgen_add_to_stack_pointer(-16);l.jsnetwork_recalculate(b,this.__wbg_ptr,a(e));var o=y()[b/4+0],i=y()[b/4+1],_=y()[b/4+2],s=y()[b/4+3],f=o,g=i;if(s)throw f=0,g=0,M(_);return n=f,r=g,F(f,g)}finally{l.__wbindgen_add_to_stack_pointer(16),l.__wbindgen_free(n,r,1)}}updateCostFunction(e){try{const o=l.__wbindgen_add_to_stack_pointer(-16);l.jsnetwork_updateCostFunction(o,this.__wbg_ptr,a(e));var n=y()[o/4+0],r=y()[o/4+1];if(r)throw M(n)}finally{l.__wbindgen_add_to_stack_pointer(16)}}getBounds(){try{const o=l.__wbindgen_add_to_stack_pointer(-16);l.jsnetwork_getBounds(o,this.__wbg_ptr);var e=y()[o/4+0],n=y()[o/4+1],r=Ze(e,n).slice();return l.__wbindgen_free(e,n*8),r}finally{l.__wbindgen_add_to_stack_pointer(16)}}debugNetwork(){let e,n;try{const g=l.__wbindgen_add_to_stack_pointer(-16);l.jsnetwork_debugNetwork(g,this.__wbg_ptr);var r=y()[g/4+0],o=y()[g/4+1],i=y()[g/4+2],_=y()[g/4+3],s=r,f=o;if(_)throw s=0,f=0,M(i);return e=s,n=f,F(s,f)}finally{l.__wbindgen_add_to_stack_pointer(16),l.__wbindgen_free(e,n,1)}}}async function Ge(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Je(){const t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(e,n){const r=F(e,n);return a(r)},t.wbg.__wbindgen_string_get=function(e,n){const r=c(n),o=typeof r=="string"?r:void 0;var i=L(o)?0:X(o,l.__wbindgen_malloc,l.__wbindgen_realloc),_=C;y()[e/4+1]=_,y()[e/4+0]=i},t.wbg.__wbindgen_object_drop_ref=function(e){M(e)},t.wbg.__wbindgen_number_get=function(e,n){const r=c(n),o=typeof r=="number"?r:void 0;pe()[e/8+1]=L(o)?0:o,y()[e/4+0]=!L(o)},t.wbg.__wbindgen_is_string=function(e){return typeof c(e)=="string"},t.wbg.__wbindgen_is_object=function(e){const n=c(e);return typeof n=="object"&&n!==null},t.wbg.__wbindgen_is_undefined=function(e){return c(e)===void 0},t.wbg.__wbindgen_in=function(e,n){return c(e)in c(n)},t.wbg.__wbindgen_is_bigint=function(e){return typeof c(e)=="bigint"},t.wbg.__wbindgen_bigint_from_u64=function(e){const n=BigInt.asUintN(64,e);return a(n)},t.wbg.__wbindgen_jsval_eq=function(e,n){return c(e)===c(n)},t.wbg.__wbindgen_error_new=function(e,n){const r=new Error(F(e,n));return a(r)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=c(e);return a(n)},t.wbg.__wbindgen_jsval_loose_eq=function(e,n){return c(e)==c(n)},t.wbg.__wbindgen_boolean_get=function(e){const n=c(e);return typeof n=="boolean"?n?1:0:2},t.wbg.__wbindgen_number_new=function(e){return a(e)},t.wbg.__wbg_getwithrefkey_3b3c46ba20582127=function(e,n){const r=c(e)[c(n)];return a(r)},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return a(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const r=c(n).stack,o=X(r,l.__wbindgen_malloc,l.__wbindgen_realloc),i=C;y()[e/4+1]=i,y()[e/4+0]=o},t.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let r,o;try{r=e,o=n,console.error(F(e,n))}finally{l.__wbindgen_free(r,o,1)}},t.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(e,n){const r=c(e)[c(n)];return a(r)},t.wbg.__wbg_set_841ac57cff3d672b=function(e,n,r){c(e)[M(n)]=M(r)},t.wbg.__wbg_now_0cfdc90c97d0c24b=function(e){return c(e).now()},t.wbg.__wbg_debug_9a6b3243fbbebb61=function(e){console.debug(c(e))},t.wbg.__wbg_error_788ae33f81d3b84b=function(e){console.error(c(e))},t.wbg.__wbg_info_2e30e8204b29d91d=function(e){console.info(c(e))},t.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(c(e))},t.wbg.__wbg_warn_d60e832f9882c1b2=function(e){console.warn(c(e))},t.wbg.__wbg_get_44be0491f933a435=function(e,n){const r=c(e)[n>>>0];return a(r)},t.wbg.__wbg_length_fff51ee6522a1a18=function(e){return c(e).length},t.wbg.__wbg_new_898a68150f225f2e=function(){const e=new Array;return a(e)},t.wbg.__wbindgen_is_function=function(e){return typeof c(e)=="function"},t.wbg.__wbg_newnoargs_581967eacc0e2604=function(e,n){const r=new Function(F(e,n));return a(r)},t.wbg.__wbg_next_526fc47e980da008=function(e){const n=c(e).next;return a(n)},t.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return I(function(e){const n=c(e).next();return a(n)},arguments)},t.wbg.__wbg_done_5c1f01fb660d73b5=function(e){return c(e).done},t.wbg.__wbg_value_1695675138684bd5=function(e){const n=c(e).value;return a(n)},t.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return a(Symbol.iterator)},t.wbg.__wbg_get_97b561fb56f034b5=function(){return I(function(e,n){const r=Reflect.get(c(e),c(n));return a(r)},arguments)},t.wbg.__wbg_call_cb65541d95d71282=function(){return I(function(e,n){const r=c(e).call(c(n));return a(r)},arguments)},t.wbg.__wbg_new_b51585de1b234aff=function(){const e=new Object;return a(e)},t.wbg.__wbg_self_1ff1d729e9aae938=function(){return I(function(){const e=self.self;return a(e)},arguments)},t.wbg.__wbg_window_5f4faef6c12b79ec=function(){return I(function(){const e=window.window;return a(e)},arguments)},t.wbg.__wbg_globalThis_1d39714405582d3c=function(){return I(function(){const e=globalThis.globalThis;return a(e)},arguments)},t.wbg.__wbg_global_651f05c6a0944d1c=function(){return I(function(){const e=global.global;return a(e)},arguments)},t.wbg.__wbg_set_502d29070ea18557=function(e,n,r){c(e)[n>>>0]=M(r)},t.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(e){let n;try{n=c(e)instanceof ArrayBuffer}catch{n=!1}return n},t.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(e){return Number.isSafeInteger(c(e))},t.wbg.__wbg_entries_e51f29c7bba0c054=function(e){const n=Object.entries(c(e));return a(n)},t.wbg.__wbg_buffer_085ec1f694018c4f=function(e){const n=c(e).buffer;return a(n)},t.wbg.__wbg_new_8125e318e6245eed=function(e){const n=new Uint8Array(c(e));return a(n)},t.wbg.__wbg_set_5cf90238115182c3=function(e,n,r){c(e).set(c(n),r>>>0)},t.wbg.__wbg_length_72e2208bbc0efc61=function(e){return c(e).length},t.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(e){let n;try{n=c(e)instanceof Uint8Array}catch{n=!1}return n},t.wbg.__wbindgen_bigint_get_as_i64=function(e,n){const r=c(n),o=typeof r=="bigint"?r:void 0;qe()[e/8+1]=L(o)?BigInt(0):o,y()[e/4+0]=!L(o)},t.wbg.__wbindgen_debug_string=function(e,n){const r=$(c(n)),o=X(r,l.__wbindgen_malloc,l.__wbindgen_realloc),i=C;y()[e/4+1]=i,y()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,n){throw new Error(F(e,n))},t.wbg.__wbindgen_memory=function(){const e=l.memory;return a(e)},t}function Pe(t,e){return l=t.exports,Ve.__wbindgen_wasm_module=e,U=null,R=null,D=null,N=null,l}async function Ve(t){if(l!==void 0)return l;typeof t>"u"&&(t="/od2net/assets/wasm_od2net_bg.wasm");const e=Je();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await Ge(await t,e);return Pe(n,r)}function ue(t,e,n){const r=t.slice();return r[10]=e[n],r[13]=e,r[14]=n,r}function le(t,e,n){const r=t.slice();return r[10]=e[n],r[11]=e,r[12]=n,r}function ze(t){let e,n=K(["lts1","lts2","lts3","lts4"]),r=[];for(let o=0;o<4;o+=1)r[o]=fe(ue(t,n,o));return{c(){e=p("ul");for(let o=0;o<4;o+=1)r[o].c()},m(o,i){T(o,e,i);for(let _=0;_<4;_+=1)r[_]&&r[_].m(e,null)},p(o,i){if(i&5){n=K(["lts1","lts2","lts3","lts4"]);let _;for(_=0;_<4;_+=1){const s=ue(o,n,_);r[_]?r[_].p(s,i):(r[_]=fe(s),r[_].c(),r[_].m(e,null))}for(;_<4;_+=1)r[_].d(1)}},d(o){o&&A(e),ye(r,o)}}}function Ke(t){let e,n=K(Object.keys(t[3])),r=[];for(let o=0;o<n.length;o+=1)r[o]=ae(le(t,n,o));return{c(){e=p("ul");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,i){T(o,e,i);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(e,null)},p(o,i){if(i&9){n=K(Object.keys(o[3]));let _;for(_=0;_<n.length;_+=1){const s=le(o,n,_);r[_]?r[_].p(s,i):(r[_]=ae(s),r[_].c(),r[_].m(e,null))}for(;_<r.length;_+=1)r[_].d(1);r.length=n.length}},d(o){o&&A(e),ye(r,o)}}}function fe(t){let e,n,r=Ce[t[10]]+"",o,i,_,s,f;function g(){t[7].call(i,t[10])}return{c(){e=p("li"),n=p("label"),o=re(r),i=p("input"),_=oe(),W(i,"type","number"),W(i,"min","1.0"),W(i,"step","0.1")},m(b,h){T(b,e,h),k(e,n),k(n,o),k(n,i),B(i,t[2][t[10]]),k(e,_),s||(f=[G(i,"input",g),G(i,"change",t[8])],s=!0)},p(b,h){t=b,h&4&&z(i.value)!==t[2][t[10]]&&B(i,t[2][t[10]])},d(b){b&&A(e),s=!1,me(f)}}}function ae(t){let e,n,r=t[10]+"",o,i,_,s,f;function g(){t[5].call(i,t[10])}return{c(){e=p("li"),n=p("label"),o=re(r),i=p("input"),_=oe(),W(i,"type","number"),W(i,"min","1.0"),W(i,"step","0.1")},m(b,h){T(b,e,h),k(e,n),k(n,o),k(n,i),B(i,t[3][t[10]]),k(e,_),s||(f=[G(i,"input",g),G(i,"change",t[6])],s=!0)},p(b,h){t=b,h&8&&r!==(r=t[10]+"")&&Ee(o,r),h&8&&z(i.value)!==t[3][t[10]]&&B(i,t[3][t[10]])},d(b){b&&A(e),s=!1,me(f)}}}function Ye(t){let e,n,r,o,i,_,s,f,g,b,h;function O(m,S){if(m[1]=="OsmHighwayType")return Ke;if(m[1]=="ByLTS")return ze}let w=O(t),u=w&&w(t);return{c(){e=p("div"),n=p("label"),r=re(`Cost function:
    `),o=p("select"),i=p("option"),i.textContent="Distance",_=p("option"),_.textContent="Weight per LTS",s=p("option"),s.textContent="Set a weight per OSM highway type",f=oe(),u&&u.c(),g=ne(),i.__value="Distance",B(i,i.__value),_.__value="ByLTS",B(_,_.__value),s.__value="OsmHighwayType",B(s,s.__value),t[1]===void 0&&Fe(()=>t[4].call(o))},m(m,S){T(m,e,S),k(e,n),k(n,r),k(n,o),k(o,i),k(o,_),k(o,s),_e(o,t[1],!0),T(m,f,S),u&&u.m(m,S),T(m,g,S),b||(h=G(o,"change",t[4]),b=!0)},p(m,[S]){S&2&&_e(o,m[1]),w===(w=O(m))&&u?u.p(m,S):(u&&u.d(1),u=w&&w(m),u&&(u.c(),u.m(g.parentNode,g)))},i:x,o:x,d(m){m&&(A(e),A(f),A(g)),u&&u.d(m),b=!1,h()}}}function Qe(t,e,n){let{cost:r}=e,o="Distance",i={lts1:1,lts2:1,lts3:1,lts4:1},_={};for(let w of["cycleway","footway","living_street","motorway","motorway_link","path","pedestrian","primary","primary_link","residential","secondary","secondary_link","service","steps","tertiary","tertiary_link","track","trunk","trunk_link","unclassified"])_[w]=1;function s(w){w=="OsmHighwayType"?n(0,r={OsmHighwayType:_}):w=="ByLTS"?n(0,r={ByLTS:i}):n(0,r=w)}function f(){o=Be(this),n(1,o)}function g(w){_[w]=z(this.value),n(3,_)}const b=()=>n(0,r);function h(w){i[w]=z(this.value),n(2,i)}const O=()=>n(0,r);return t.$$set=w=>{"cost"in w&&n(0,r=w.cost)},t.$$.update=()=>{t.$$.dirty&2&&s(o)},[r,o,i,_,f,g,b,h,O]}class $e extends be{constructor(e){super(),ge(this,e,Qe,Ye,te,{cost:0})}}export{$e as C,xe as G,ee as J,Ve as _};
