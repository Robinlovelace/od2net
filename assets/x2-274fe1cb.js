import{S as te,i as ne,s as ae,G as ue,e as k,h as I,z as F,l as S,I as Q,q as z,J as ce,K as de,N as pe,O as me,t as w,b as y,v as q,w as ge,Q as _e,R as be,T as U,U as V,m as he,L as we,c as D,a as J,d as N,o as Le,H as ve,x as Z,y as H,f as E,g as W,n as h,A as K,r as X,u as Y,M as ye,_ as Ce,V as se,j as $,E as le,D as ke,W as Me}from"./Legend-52595ab8.js";import{C as Be,_ as ze,J as Ee,a as Ie,G as Se}from"./CostFunction-88c358f3.js";import{S as qe,L as De}from"./SidebarControls-958a55ca.js";function Je(a){let e,n,s,t,i,u,p;const l=a[16].default,r=ue(l,a,a[15],null);return{c(){e=k("div"),r&&r.c(),I(e,"tabindex",n=a[1]?0:void 0),I(e,"role",s=a[1]?"button":void 0),F(e,"z-index",a[2])},m(c,m){S(c,e,m),r&&r.m(e,null),i=!0,u||(p=[Q(a[6].call(null,e)),Q(t=Ne.call(null,e,a[0])),z(e,"click",a[17]),z(e,"dblclick",a[18]),z(e,"contextmenu",a[19]),z(e,"mouseenter",a[20]),z(e,"mouseleave",a[21]),z(e,"mousemove",a[22]),z(e,"keydown",a[7])],u=!0)},p(c,[m]){r&&r.p&&(!i||m&32768)&&ce(r,l,c,c[15],i?pe(l,c[15],m,null):de(c[15]),null),(!i||m&2&&n!==(n=c[1]?0:void 0))&&I(e,"tabindex",n),(!i||m&2&&s!==(s=c[1]?"button":void 0))&&I(e,"role",s),t&&me(t.update)&&m&1&&t.update.call(null,c[0]),m&4&&F(e,"z-index",c[2])},i(c){i||(w(r,c),i=!0)},o(c){y(r,c),i=!1},d(c){c&&q(e),r&&r.d(c),u=!1,ge(p)}}}function Ne(a,e){const n=a.className;function s(t){t?a.className=`${n} ${t}`:a.className=n}return s(e),{update:s}}function Oe(a,e,n){let s,t,i,{$$slots:u={},$$scope:p}=e,{lngLat:l}=e,{class:r=void 0}=e,{interactive:c=!0}=e,{asButton:m=!1}=e,{draggable:b=!1}=e,{feature:v=null}=e,{offset:C=void 0}=e,{zIndex:g=void 0}=e;const L=_e(),{map:M,layerEvent:O,self:P}=be();U(a,M,f=>n(24,i=f)),U(a,O,f=>n(23,s=f)),U(a,P,f=>n(14,t=f));function j(f){V(P,t=new he.Marker({element:f,draggable:b,offset:C}).setLngLat(l).addTo(i),t);const A=()=>o("dragstart"),R=()=>{_(),o("drag")},T=()=>{_(),o("dragend")};return b&&(t.on("dragstart",A),t.on("drag",R),t.on("dragend",T)),{destroy(){b&&(t==null||t.off("dragstart",A),t==null||t.off("drag",R),t==null||t.off("dragend",T)),t==null||t.remove()}}}function _(){let f=t==null?void 0:t.getLngLat();f&&(Array.isArray(l)?n(9,l=[f.lng,f.lat]):l&&"lon"in l?n(9,l={lon:f.lng,lat:f.lat}):n(9,l=f))}function d(f){f.key===" "&&(f.preventDefault(),f.stopPropagation(),o("click"))}function o(f){if(!c)return;let A=t==null?void 0:t.getLngLat();if(!A)return;const R=[A.lng,A.lat];let T={map:i,marker:t,lngLat:R,features:[{type:"Feature",properties:(v==null?void 0:v.properties)??{},geometry:{type:"Point",coordinates:R}}]};V(O,s={...T,layerType:"marker",type:f},s),L(f,T)}const B=()=>o("click"),G=()=>o("dblclick"),ie=()=>o("contextmenu"),oe=f=>{o("mouseenter")},re=()=>{o("mouseleave")},fe=()=>o("mousemove");return a.$$set=f=>{"lngLat"in f&&n(9,l=f.lngLat),"class"in f&&n(0,r=f.class),"interactive"in f&&n(10,c=f.interactive),"asButton"in f&&n(1,m=f.asButton),"draggable"in f&&n(11,b=f.draggable),"feature"in f&&n(12,v=f.feature),"offset"in f&&n(13,C=f.offset),"zIndex"in f&&n(2,g=f.zIndex),"$$scope"in f&&n(15,p=f.$$scope)},a.$$.update=()=>{a.$$.dirty&16896&&(t==null||t.setLngLat(l)),a.$$.dirty&24576&&(t==null||t.setOffset(C??[0,0]))},[r,m,g,M,O,P,j,d,o,l,c,b,v,C,t,p,u,B,G,ie,oe,re,fe]}class Pe extends te{constructor(e){super(),ne(this,e,Oe,Je,ae,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2})}}const je=`<svg width="40" height="50" viewBox="0 0 40 50" xmlns="http://www.w3.org/2000/svg">
    <defs/>
    <path id="path2" fill="none" stroke="none" visibility="hidden" d="M 1.0169492 25.59322 L 25.016949 25.59322 L 25.016949 49.59322 L 1.0169492 49.59322 Z"/>
    <path id="path4" fill="#000000" stroke="none" d="M 19.198305 2.6101693 C 10.336661 2.6101693 3.1694916 9.7773384 3.1694916 18.638983 C 3.1694916 30.660593 19.198305 48.406779 19.198305 48.406779 C 19.198305 48.406779 35.227118 30.660593 35.227118 18.638983 C 35.227118 9.7773384 28.059949 2.6101693 19.198305 2.6101693 Z M 19.198305 24.363559 C 16.038339 24.363559 13.473728 21.798949 13.473728 18.638983 C 13.473728 15.479016 16.038339 12.914406 19.198305 12.914406 C 22.358271 12.914406 24.922881 15.479016 24.922881 18.638983 C 24.922881 21.798949 22.358271 24.363559 19.198305 24.363559 Z"/>
</svg>
`;function x(a){let e,n,s,t,i,u,p,l,r,c,m,b;function v(g){a[16](g)}let C={};return a[2]!==void 0&&(C.cost=a[2]),l=new Ie({props:C}),Z.push(()=>H(l,"cost",v)),{c(){e=k("div"),n=k("label"),s=W("Max requests (limit for faster updates):"),t=k("br"),i=E(),u=k("input"),p=E(),D(l.$$.fragment),I(u,"type","number"),I(u,"min",1)},m(g,L){S(g,e,L),h(e,n),h(n,s),h(n,t),h(n,i),h(n,u),$(u,a[1]),S(g,p,L),J(l,g,L),c=!0,m||(b=z(u,"input",a[15]),m=!0)},p(g,L){L&2&&se(u.value)!==g[1]&&$(u,g[1]);const M={};!r&&L&4&&(r=!0,M.cost=g[2],K(()=>r=!1)),l.$set(M)},i(g){c||(w(l.$$.fragment,g),c=!0)},o(g){y(l.$$.fragment,g),c=!1},d(g){g&&(q(e),q(p)),N(l,g),m=!1,b()}}}function ee(a){let e,n,s,t;return s=new qe({props:{outputMetadata:a[6].metadata,map:a[3],controls:a[8]}}),{c(){e=k("hr"),n=E(),D(s.$$.fragment)},m(i,u){S(i,e,u),S(i,n,u),J(s,i,u),t=!0},p(i,u){const p={};u&64&&(p.outputMetadata=i[6].metadata),u&8&&(p.map=i[3]),s.$set(p)},i(i){t||(w(s.$$.fragment,i),t=!0)},o(i){y(s.$$.fragment,i),t=!1},d(i){i&&(q(e),q(n)),N(s,i)}}}function Ae(a){let e,n,s,t,i,u,p,l,r,c,m,b,v,C,g,L,M,O;n=new ve({props:{app:"interactive"}});function P(o){a[14](o)}let j={};a[0]!==void 0&&(j.example=a[0]),b=new Be({props:j}),Z.push(()=>H(b,"example",P));let _=a[4]&&x(a),d=a[6].metadata&&ee(a);return{c(){e=k("div"),D(n.$$.fragment),s=E(),t=k("label"),i=W("Open a "),u=k("i"),u.textContent=".bin",p=W(" network file or an "),l=k("i"),l.textContent=".osm.pbf",r=E(),c=k("input"),m=E(),D(b.$$.fragment),C=E(),_&&_.c(),g=E(),d&&d.c(),I(c,"type","file"),I(e,"slot","left")},m(o,B){S(o,e,B),J(n,e,null),h(e,s),h(e,t),h(t,i),h(t,u),h(t,p),h(t,l),h(t,r),h(t,c),a[13](c),h(e,m),J(b,e,null),h(e,C),_&&_.m(e,null),h(e,g),d&&d.m(e,null),L=!0,M||(O=z(c,"change",a[9]),M=!0)},p(o,B){const G={};!v&&B&1&&(v=!0,G.example=o[0],K(()=>v=!1)),b.$set(G),o[4]?_?(_.p(o,B),B&16&&w(_,1)):(_=x(o),_.c(),w(_,1),_.m(e,g)):_&&(X(),y(_,1,1,()=>{_=null}),Y()),o[6].metadata?d?(d.p(o,B),B&64&&w(d,1)):(d=ee(o),d.c(),w(d,1),d.m(e,null)):d&&(X(),y(d,1,1,()=>{d=null}),Y())},i(o){L||(w(n.$$.fragment,o),w(b.$$.fragment,o),w(_),w(d),L=!0)},o(o){y(n.$$.fragment,o),y(b.$$.fragment,o),y(_),y(d),L=!1},d(o){o&&q(e),N(n),a[13](null),N(b),_&&_.d(),d&&d.d(),M=!1,O()}}}function Re(a){let e,n;return{c(){e=new Me(!1),n=ke(),e.a=n},m(s,t){e.m(je,s,t),S(s,n,t)},p:le,d(s){s&&(q(n),e.d())}}}function Te(a){let e,n;return e=new De({props:{controls:a[8]}}),{c(){D(e.$$.fragment)},m(s,t){J(e,s,t),n=!0},p:le,i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Fe(a){let e,n,s,t,i;function u(l){a[11](l)}let p={draggable:!0,$$slots:{default:[Re]},$$scope:{ctx:a}};return a[5]!==void 0&&(p.lngLat=a[5]),e=new Pe({props:p}),Z.push(()=>H(e,"lngLat",u)),e.$on("dragend",a[10]),t=new Se({props:{data:a[6],$$slots:{default:[Te]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment),s=E(),D(t.$$.fragment)},m(l,r){J(e,l,r),S(l,s,r),J(t,l,r),i=!0},p(l,r){const c={};r&524288&&(c.$$scope={dirty:r,ctx:l}),!n&&r&32&&(n=!0,c.lngLat=l[5],K(()=>n=!1)),e.$set(c);const m={};r&64&&(m.data=l[6]),r&524288&&(m.$$scope={dirty:r,ctx:l}),t.$set(m)},i(l){i||(w(e.$$.fragment,l),w(t.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),y(t.$$.fragment,l),i=!1},d(l){l&&q(s),N(e,l),N(t,l)}}}function Ze(a){let e,n,s,t;function i(p){a[12](p)}let u={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Fe]},$$scope:{ctx:a}};return a[3]!==void 0&&(u.map=a[3]),n=new ye({props:u}),Z.push(()=>H(n,"map",i)),{c(){e=k("div"),D(n.$$.fragment),I(e,"slot","main"),F(e,"position","relative"),F(e,"width","100%"),F(e,"height","100vh")},m(p,l){S(p,e,l),J(n,e,null),t=!0},p(p,l){const r={};l&524384&&(r.$$scope={dirty:l,ctx:p}),!s&&l&8&&(s=!0,r.map=p[3],K(()=>s=!1)),n.$set(r)},i(p){t||(w(n.$$.fragment,p),t=!0)},o(p){y(n.$$.fragment,p),t=!1},d(p){p&&q(e),N(n)}}}function Ge(a){let e,n;return e=new we({props:{$$slots:{main:[Ze],left:[Ae]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment)},m(s,t){J(e,s,t),n=!0},p(s,[t]){const i={};t&524543&&(i.$$scope={dirty:t,ctx:s}),e.$set(i)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function He(a,e,n){Le(async()=>{await ze(),await Ce()});let s,t,i="",u={lng:0,lat:0},p={type:"FeatureCollection",features:[]},l=1e3,r="Distance",c={maxCount:1e3,originRadius:3,destinationRadius:3,streetviewOn:!1},m;async function b(d){n(0,i=""),v(await m.files[0].arrayBuffer())}function v(d){try{n(4,t=new Ee(new Uint8Array(d)));let o=t.getBounds();s.fitBounds([[o[0],o[1]],[o[2],o[3]]],{padding:20,animate:!1}),n(5,u.lng=(o[0]+o[2])/2,u),n(5,u.lat=(o[1]+o[3])/2,u),g()}catch(o){window.alert(`Problem loading network file: ${o}`)}}async function C(d){if(d!=""){let o=await fetch(`https://assets.od2net.org/pbf_clips/${d}.osm.pbf`);v(await o.arrayBuffer())}}function g(){t&&n(6,p=JSON.parse(t.recalculate({lng:u.lng,lat:u.lat,max_requests:l,cost:r})))}function L(d){u=d,n(5,u)}function M(d){s=d,n(3,s)}function O(d){Z[d?"unshift":"push"](()=>{m=d,n(7,m)})}function P(d){i=d,n(0,i)}function j(){l=se(this.value),n(1,l)}function _(d){r=d,n(2,r)}return a.$$.update=()=>{a.$$.dirty&1&&C(i),a.$$.dirty&6&&g()},[i,l,r,s,t,u,p,m,c,b,g,L,M,O,P,j,_]}class Ke extends te{constructor(e){super(),ne(this,e,He,Ge,ae,{})}}new Ke({target:document.getElementById("app")});
