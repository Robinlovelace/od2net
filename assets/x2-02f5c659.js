import{I as Pe,J as Ze,S as _e,i as ge,s as ue,E as de,l as T,t as I,r as be,b as E,u as we,v as B,K as He,N as H,O as Je,Q as te,R as ye,G as me,T as Me,U as Ae,V as je,W as Ie,X as Ge,e as A,h as R,z as ne,Y as he,q as C,Z as Ke,w as Ee,$ as Ve,a0 as Qe,m as Xe,L as Ye,c as J,a as G,d as K,o as xe,f as W,g as re,n as k,M as $e,x as pe,y as Te,A as Be,_ as et,a1 as Oe,a2 as tt,j as se,D as nt,H as rt,a3 as ot}from"./SidebarControls-5f9dc64b.js";function it(t,e,n,r,o){let i=!1;t.getSource(e)&&(i=!0,t.removeSource(e));const a=()=>{r(e)&&(t.addSource(e,n),o())};if(i){const u=()=>{e&&(t.getSource(e)?setTimeout(u,1):a())};u()}else a()}function st(t,e,n){Pe().then(()=>{let r=Ze(t);if(!r)return;r.getSource(e)===n&&r.removeSource(e)})}function ke(t){let e=t[0],n,r,o=ve(t);return{c(){o.c(),n=de()},m(i,a){o.m(i,a),T(i,n,a),r=!0},p(i,a){a&1&&ue(e,e=i[0])?(be(),E(o,1,1,me),we(),o=ve(i),o.c(),I(o,1),o.m(n.parentNode,n)):o.p(i,a)},i(i){r||(I(o),r=!0)},o(i){E(o),r=!1},d(i){i&&B(n),o.d(i)}}}function ve(t){let e;const n=t[15].default,r=Me(n,t,t[14],null);return{c(){r&&r.c()},m(o,i){r&&r.m(o,i),e=!0},p(o,i){r&&r.p&&(!e||i&16384)&&Ae(r,n,o,o[14],e?Ie(n,o[14],i,null):je(o[14]),null)},i(o){e||(I(r,o),e=!0)},o(o){E(r,o),e=!1},d(o){r&&r.d(o)}}}function at(t){let e,n,r=t[0]&&ke(t);return{c(){r&&r.c(),e=de()},m(o,i){r&&r.m(o,i),T(o,e,i),n=!0},p(o,[i]){o[0]?r?(r.p(o,i),i&1&&I(r,1)):(r=ke(o),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(be(),E(r,1,1,()=>{r=null}),we())},i(o){n||(I(r),n=!0)},o(o){E(r),n=!1},d(o){o&&B(e),r&&r.d(o)}}}function lt(t,e,n){let r,o,i,{$$slots:a={},$$scope:u}=e,{id:s=Ge("geojson")}=e,{data:_}=e,{generateId:c=!1}=e,{promoteId:m=void 0}=e,{filter:v=void 0}=e,{lineMetrics:L=void 0}=e,{cluster:l=void 0}=e;const{map:b,cluster:y,self:M}=He();H(t,b,g=>n(13,o=g)),H(t,y,g=>n(16,i=g)),H(t,M,g=>n(0,r=g));let S,h=!0;return Je(()=>{r&&S&&o&&(st(b,r,S),te(M,r=null,r),n(11,S=void 0))}),t.$$set=g=>{"id"in g&&n(4,s=g.id),"data"in g&&n(5,_=g.data),"generateId"in g&&n(6,c=g.generateId),"promoteId"in g&&n(7,m=g.promoteId),"filter"in g&&n(8,v=g.filter),"lineMetrics"in g&&n(9,L=g.lineMetrics),"cluster"in g&&n(10,l=g.cluster),"$$scope"in g&&n(14,u=g.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&te(y,i=l,i),t.$$.dirty&12273&&o&&r!==s&&(te(M,r=s,r),it(o,r,ye({type:"geojson",data:_,filter:v,lineMetrics:L,generateId:c,promoteId:m,cluster:!!l,clusterMinPoints:l==null?void 0:l.minPoints,clusterMaxZoom:l==null?void 0:l.maxZoom,clusterRadius:l==null?void 0:l.radius,clusterProperties:l==null?void 0:l.properties}),g=>o&&g===r,()=>{r&&(n(11,S=o==null?void 0:o.getSource(r)),n(12,h=!0))})),t.$$.dirty&8208&&(o==null||o.on("style.load",()=>{n(11,S=o==null?void 0:o.getSource(s))})),t.$$.dirty&6176&&S&&(h?n(12,h=!1):S.setData(_)),t.$$.dirty&3072&&(S==null||S.setClusterOptions(ye({cluster:!!l,clusterMaxZoom:l==null?void 0:l.maxZoom,clusterRadius:l==null?void 0:l.radius})))},[r,b,y,M,s,_,c,m,v,L,l,S,h,o,u,a]}class ut extends _e{constructor(e){super(),ge(this,e,lt,at,ue,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function ct(t){let e,n,r,o,i,a,u;const s=t[16].default,_=Me(s,t,t[15],null);return{c(){e=A("div"),_&&_.c(),R(e,"tabindex",n=t[1]?0:void 0),R(e,"role",r=t[1]?"button":void 0),ne(e,"z-index",t[2])},m(c,m){T(c,e,m),_&&_.m(e,null),i=!0,a||(u=[he(t[6].call(null,e)),he(o=ft.call(null,e,t[0])),C(e,"click",t[17]),C(e,"dblclick",t[18]),C(e,"contextmenu",t[19]),C(e,"mouseenter",t[20]),C(e,"mouseleave",t[21]),C(e,"mousemove",t[22]),C(e,"keydown",t[7])],a=!0)},p(c,[m]){_&&_.p&&(!i||m&32768)&&Ae(_,s,c,c[15],i?Ie(s,c[15],m,null):je(c[15]),null),(!i||m&2&&n!==(n=c[1]?0:void 0))&&R(e,"tabindex",n),(!i||m&2&&r!==(r=c[1]?"button":void 0))&&R(e,"role",r),o&&Ke(o.update)&&m&1&&o.update.call(null,c[0]),m&4&&ne(e,"z-index",c[2])},i(c){i||(I(_,c),i=!0)},o(c){E(_,c),i=!1},d(c){c&&B(e),_&&_.d(c),a=!1,Ee(u)}}}function ft(t,e){const n=t.className;function r(o){o?t.className=`${n} ${o}`:t.className=n}return r(e),{update:r}}function _t(t,e,n){let r,o,i,{$$slots:a={},$$scope:u}=e,{lngLat:s}=e,{class:_=void 0}=e,{interactive:c=!0}=e,{asButton:m=!1}=e,{draggable:v=!1}=e,{feature:L=null}=e,{offset:l=void 0}=e,{zIndex:b=void 0}=e;const y=Ve(),{map:M,layerEvent:S,self:h}=Qe();H(t,M,d=>n(24,i=d)),H(t,S,d=>n(23,r=d)),H(t,h,d=>n(14,o=d));function g(d){te(h,o=new Xe.Marker({element:d,draggable:v,offset:l}).setLngLat(s).addTo(i),o);const q=()=>O("dragstart"),V=()=>{U(),O("drag")},Q=()=>{U(),O("dragend")};return v&&(o.on("dragstart",q),o.on("drag",V),o.on("dragend",Q)),{destroy(){v&&(o==null||o.off("dragstart",q),o==null||o.off("drag",V),o==null||o.off("dragend",Q)),o==null||o.remove()}}}function U(){let d=o==null?void 0:o.getLngLat();d&&(Array.isArray(s)?n(9,s=[d.lng,d.lat]):s&&"lon"in s?n(9,s={lon:d.lng,lat:d.lat}):n(9,s=d))}function D(d){d.key===" "&&(d.preventDefault(),d.stopPropagation(),O("click"))}function O(d){if(!c)return;let q=o==null?void 0:o.getLngLat();if(!q)return;const V=[q.lng,q.lat];let Q={map:i,marker:o,lngLat:V,features:[{type:"Feature",properties:(L==null?void 0:L.properties)??{},geometry:{type:"Point",coordinates:V}}]};te(S,r={...Q,layerType:"marker",type:d},r),y(d,Q)}const Fe=()=>O("click"),We=()=>O("dblclick"),ze=()=>O("contextmenu"),Ne=d=>{O("mouseenter")},Ue=()=>{O("mouseleave")},qe=()=>O("mousemove");return t.$$set=d=>{"lngLat"in d&&n(9,s=d.lngLat),"class"in d&&n(0,_=d.class),"interactive"in d&&n(10,c=d.interactive),"asButton"in d&&n(1,m=d.asButton),"draggable"in d&&n(11,v=d.draggable),"feature"in d&&n(12,L=d.feature),"offset"in d&&n(13,l=d.offset),"zIndex"in d&&n(2,b=d.zIndex),"$$scope"in d&&n(15,u=d.$$scope)},t.$$.update=()=>{t.$$.dirty&16896&&(o==null||o.setLngLat(s)),t.$$.dirty&24576&&(o==null||o.setOffset(l??[0,0]))},[_,m,b,M,S,h,g,D,O,s,c,v,L,l,o,u,a,Fe,We,ze,Ne,Ue,qe]}class gt extends _e{constructor(e){super(),ge(this,e,_t,ct,ue,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2})}}let w;const Ce=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ce.decode();let Y=null;function oe(){return(Y===null||Y.byteLength===0)&&(Y=new Uint8Array(w.memory.buffer)),Y}function P(t,e){return t=t>>>0,Ce.decode(oe().subarray(t,t+e))}const F=new Array(128).fill(void 0);F.push(void 0,null,!0,!1);let ie=F.length;function p(t){ie===F.length&&F.push(F.length+1);const e=ie;return ie=F[e],F[e]=t,e}function f(t){return F[t]}let N=0;const ae=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},dt=typeof ae.encodeInto=="function"?function(t,e){return ae.encodeInto(t,e)}:function(t,e){const n=ae.encode(t);return e.set(n),{read:t.length,written:n.length}};function ce(t,e,n){if(n===void 0){const u=ae.encode(t),s=e(u.length,1)>>>0;return oe().subarray(s,s+u.length).set(u),N=u.length,s}let r=t.length,o=e(r,1)>>>0;const i=oe();let a=0;for(;a<r;a++){const u=t.charCodeAt(a);if(u>127)break;i[o+a]=u}if(a!==r){a!==0&&(t=t.slice(a)),o=n(o,r,r=a+t.length*3,1)>>>0;const u=oe().subarray(o+a,o+r),s=dt(t,u);a+=s.written}return N=a,o}function X(t){return t==null}let x=null;function j(){return(x===null||x.byteLength===0)&&(x=new Int32Array(w.memory.buffer)),x}function bt(t){t<132||(F[t]=ie,ie=t)}function Z(t){const e=f(t);return bt(t),e}let $=null;function Re(){return($===null||$.byteLength===0)&&($=new Float64Array(w.memory.buffer)),$}let ee=null;function wt(){return(ee===null||ee.byteLength===0)&&(ee=new BigInt64Array(w.memory.buffer)),ee}function fe(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const o=t.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=t.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(t)){const o=t.length;let i="[";o>0&&(i+=fe(t[0]));for(let a=1;a<o;a++)i+=", "+fe(t[a]);return i+="]",i}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function mt(t,e){const n=e(t.length*1,1)>>>0;return oe().set(t,n/1),N=t.length,n}function pt(t,e){return t=t>>>0,Re().subarray(t/8,t/8+e)}function z(t,e){try{return t.apply(this,e)}catch(n){w.__wbindgen_exn_store(p(n))}}class le{static __wrap(e){e=e>>>0;const n=Object.create(le.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();w.__wbg_jsnetwork_free(e)}constructor(e){try{const i=w.__wbindgen_add_to_stack_pointer(-16),a=mt(e,w.__wbindgen_malloc),u=N;w.jsnetwork_new(i,a,u);var n=j()[i/4+0],r=j()[i/4+1],o=j()[i/4+2];if(o)throw Z(r);return le.__wrap(n)}finally{w.__wbindgen_add_to_stack_pointer(16)}}recalculate(e){let n,r;try{const c=w.__wbindgen_add_to_stack_pointer(-16);w.jsnetwork_recalculate(c,this.__wbg_ptr,p(e));var o=j()[c/4+0],i=j()[c/4+1],a=j()[c/4+2],u=j()[c/4+3],s=o,_=i;if(u)throw s=0,_=0,Z(a);return n=s,r=_,P(s,_)}finally{w.__wbindgen_add_to_stack_pointer(16),w.__wbindgen_free(n,r,1)}}getBounds(){try{const o=w.__wbindgen_add_to_stack_pointer(-16);w.jsnetwork_getBounds(o,this.__wbg_ptr);var e=j()[o/4+0],n=j()[o/4+1],r=pt(e,n).slice();return w.__wbindgen_free(e,n*8),r}finally{w.__wbindgen_add_to_stack_pointer(16)}}}async function yt(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function ht(){const t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(e,n){const r=P(e,n);return p(r)},t.wbg.__wbindgen_string_get=function(e,n){const r=f(n),o=typeof r=="string"?r:void 0;var i=X(o)?0:ce(o,w.__wbindgen_malloc,w.__wbindgen_realloc),a=N;j()[e/4+1]=a,j()[e/4+0]=i},t.wbg.__wbindgen_object_drop_ref=function(e){Z(e)},t.wbg.__wbindgen_is_string=function(e){return typeof f(e)=="string"},t.wbg.__wbindgen_is_object=function(e){const n=f(e);return typeof n=="object"&&n!==null},t.wbg.__wbindgen_is_undefined=function(e){return f(e)===void 0},t.wbg.__wbindgen_in=function(e,n){return f(e)in f(n)},t.wbg.__wbindgen_number_get=function(e,n){const r=f(n),o=typeof r=="number"?r:void 0;Re()[e/8+1]=X(o)?0:o,j()[e/4+0]=!X(o)},t.wbg.__wbindgen_is_bigint=function(e){return typeof f(e)=="bigint"},t.wbg.__wbindgen_bigint_from_u64=function(e){const n=BigInt.asUintN(64,e);return p(n)},t.wbg.__wbindgen_jsval_eq=function(e,n){return f(e)===f(n)},t.wbg.__wbindgen_error_new=function(e,n){const r=new Error(P(e,n));return p(r)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=f(e);return p(n)},t.wbg.__wbindgen_jsval_loose_eq=function(e,n){return f(e)==f(n)},t.wbg.__wbindgen_boolean_get=function(e){const n=f(e);return typeof n=="boolean"?n?1:0:2},t.wbg.__wbindgen_number_new=function(e){return p(e)},t.wbg.__wbg_getwithrefkey_3b3c46ba20582127=function(e,n){const r=f(e)[f(n)];return p(r)},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return p(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const r=f(n).stack,o=ce(r,w.__wbindgen_malloc,w.__wbindgen_realloc),i=N;j()[e/4+1]=i,j()[e/4+0]=o},t.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let r,o;try{r=e,o=n,console.error(P(e,n))}finally{w.__wbindgen_free(r,o,1)}},t.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(e,n){const r=f(e)[f(n)];return p(r)},t.wbg.__wbg_set_841ac57cff3d672b=function(e,n,r){f(e)[Z(n)]=Z(r)},t.wbg.__wbg_now_0cfdc90c97d0c24b=function(e){return f(e).now()},t.wbg.__wbg_debug_9a6b3243fbbebb61=function(e){console.debug(f(e))},t.wbg.__wbg_error_788ae33f81d3b84b=function(e){console.error(f(e))},t.wbg.__wbg_info_2e30e8204b29d91d=function(e){console.info(f(e))},t.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(f(e))},t.wbg.__wbg_warn_d60e832f9882c1b2=function(e){console.warn(f(e))},t.wbg.__wbg_get_44be0491f933a435=function(e,n){const r=f(e)[n>>>0];return p(r)},t.wbg.__wbg_length_fff51ee6522a1a18=function(e){return f(e).length},t.wbg.__wbg_new_898a68150f225f2e=function(){const e=new Array;return p(e)},t.wbg.__wbindgen_is_function=function(e){return typeof f(e)=="function"},t.wbg.__wbg_newnoargs_581967eacc0e2604=function(e,n){const r=new Function(P(e,n));return p(r)},t.wbg.__wbg_next_526fc47e980da008=function(e){const n=f(e).next;return p(n)},t.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return z(function(e){const n=f(e).next();return p(n)},arguments)},t.wbg.__wbg_done_5c1f01fb660d73b5=function(e){return f(e).done},t.wbg.__wbg_value_1695675138684bd5=function(e){const n=f(e).value;return p(n)},t.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return p(Symbol.iterator)},t.wbg.__wbg_get_97b561fb56f034b5=function(){return z(function(e,n){const r=Reflect.get(f(e),f(n));return p(r)},arguments)},t.wbg.__wbg_call_cb65541d95d71282=function(){return z(function(e,n){const r=f(e).call(f(n));return p(r)},arguments)},t.wbg.__wbg_new_b51585de1b234aff=function(){const e=new Object;return p(e)},t.wbg.__wbg_self_1ff1d729e9aae938=function(){return z(function(){const e=self.self;return p(e)},arguments)},t.wbg.__wbg_window_5f4faef6c12b79ec=function(){return z(function(){const e=window.window;return p(e)},arguments)},t.wbg.__wbg_globalThis_1d39714405582d3c=function(){return z(function(){const e=globalThis.globalThis;return p(e)},arguments)},t.wbg.__wbg_global_651f05c6a0944d1c=function(){return z(function(){const e=global.global;return p(e)},arguments)},t.wbg.__wbg_set_502d29070ea18557=function(e,n,r){f(e)[n>>>0]=Z(r)},t.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(e){let n;try{n=f(e)instanceof ArrayBuffer}catch{n=!1}return n},t.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(e){return Number.isSafeInteger(f(e))},t.wbg.__wbg_entries_e51f29c7bba0c054=function(e){const n=Object.entries(f(e));return p(n)},t.wbg.__wbg_buffer_085ec1f694018c4f=function(e){const n=f(e).buffer;return p(n)},t.wbg.__wbg_new_8125e318e6245eed=function(e){const n=new Uint8Array(f(e));return p(n)},t.wbg.__wbg_set_5cf90238115182c3=function(e,n,r){f(e).set(f(n),r>>>0)},t.wbg.__wbg_length_72e2208bbc0efc61=function(e){return f(e).length},t.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(e){let n;try{n=f(e)instanceof Uint8Array}catch{n=!1}return n},t.wbg.__wbindgen_bigint_get_as_i64=function(e,n){const r=f(n),o=typeof r=="bigint"?r:void 0;wt()[e/8+1]=X(o)?BigInt(0):o,j()[e/4+0]=!X(o)},t.wbg.__wbindgen_debug_string=function(e,n){const r=fe(f(n)),o=ce(r,w.__wbindgen_malloc,w.__wbindgen_realloc),i=N;j()[e/4+1]=i,j()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,n){throw new Error(P(e,n))},t.wbg.__wbindgen_memory=function(){const e=w.memory;return p(e)},t}function kt(t,e){return w=t.exports,De.__wbindgen_wasm_module=e,ee=null,$=null,x=null,Y=null,w}async function De(t){if(w!==void 0)return w;typeof t>"u"&&(t="/od2net/assets/wasm_od2net_bg.wasm");const e=ht();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await yt(await t,e);return kt(n,r)}const vt='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>';function Se(t){let e,n,r,o,i,a,u,s,_,c,m,v,L,l,b,y,M,S;return y=tt(t[15][0]),{c(){e=A("div"),n=A("label"),r=re("Max requests (limit for faster updates):"),o=A("br"),i=W(),a=A("input"),u=W(),s=A("div"),_=A("label"),c=A("input"),m=re("Distance"),v=W(),L=A("label"),l=A("input"),b=re(`Avoid
          main roads`),R(a,"type","number"),R(a,"min",1),R(c,"type","radio"),c.__value="Distance",se(c,c.__value),R(l,"type","radio"),l.__value="AvoidMainRoads",se(l,l.__value),y.p(c,l)},m(h,g){T(h,e,g),k(e,n),k(n,r),k(n,o),k(n,i),k(n,a),se(a,t[0]),T(h,u,g),T(h,s,g),k(s,_),k(_,c),c.checked=c.__value===t[1],k(_,m),k(s,v),k(s,L),k(L,l),l.checked=l.__value===t[1],k(L,b),M||(S=[C(a,"input",t[13]),C(c,"change",t[14]),C(l,"change",t[16])],M=!0)},p(h,g){g&1&&Oe(a.value)!==h[0]&&se(a,h[0]),g&2&&(c.checked=c.__value===h[1]),g&2&&(l.checked=l.__value===h[1])},d(h){h&&(B(e),B(u),B(s)),y.r(),M=!1,Ee(S)}}}function Le(t){let e,n,r,o;return r=new nt({props:{outputMetadata:t[5].metadata,map:t[2],controls:t[7]}}),{c(){e=A("hr"),n=W(),J(r.$$.fragment)},m(i,a){T(i,e,a),T(i,n,a),G(r,i,a),o=!0},p(i,a){const u={};a&32&&(u.outputMetadata=i[5].metadata),a&4&&(u.map=i[2]),r.$set(u)},i(i){o||(I(r.$$.fragment,i),o=!0)},o(i){E(r.$$.fragment,i),o=!1},d(i){i&&(B(e),B(n)),K(r,i)}}}function St(t){let e,n,r,o,i,a,u,s,_,c,m,v,L,l=t[3]&&Se(t),b=t[5].metadata&&Le(t);return{c(){e=A("div"),n=A("h1"),n.textContent="od2net interactive mode",r=W(),o=A("label"),i=re("Open a "),a=A("i"),a.textContent=".bin",u=re(` network file
      `),s=A("input"),_=W(),l&&l.c(),c=W(),b&&b.c(),R(s,"type","file"),R(e,"slot","left")},m(y,M){T(y,e,M),k(e,n),k(e,r),k(e,o),k(o,i),k(o,a),k(o,u),k(o,s),t[12](s),k(e,_),l&&l.m(e,null),k(e,c),b&&b.m(e,null),m=!0,v||(L=C(s,"change",t[8]),v=!0)},p(y,M){y[3]?l?l.p(y,M):(l=Se(y),l.c(),l.m(e,c)):l&&(l.d(1),l=null),y[5].metadata?b?(b.p(y,M),M&32&&I(b,1)):(b=Le(y),b.c(),I(b,1),b.m(e,null)):b&&(be(),E(b,1,1,()=>{b=null}),we())},i(y){m||(I(b),m=!0)},o(y){E(b),m=!1},d(y){y&&B(e),t[12](null),l&&l.d(),b&&b.d(),v=!1,L()}}}function Lt(t){let e,n;return{c(){e=new ot(!1),n=de(),e.a=n},m(r,o){e.m(vt,r,o),T(r,n,o)},p:me,d(r){r&&(B(n),e.d())}}}function Mt(t){let e,n;return e=new rt({props:{controls:t[7]}}),{c(){J(e.$$.fragment)},m(r,o){G(e,r,o),n=!0},p:me,i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function At(t){let e,n,r,o,i;function a(s){t[10](s)}let u={draggable:!0,$$slots:{default:[Lt]},$$scope:{ctx:t}};return t[4]!==void 0&&(u.lngLat=t[4]),e=new gt({props:u}),pe.push(()=>Te(e,"lngLat",a)),e.$on("dragend",t[9]),o=new ut({props:{data:t[5],$$slots:{default:[Mt]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment),r=W(),J(o.$$.fragment)},m(s,_){G(e,s,_),T(s,r,_),G(o,s,_),i=!0},p(s,_){const c={};_&131072&&(c.$$scope={dirty:_,ctx:s}),!n&&_&16&&(n=!0,c.lngLat=s[4],Be(()=>n=!1)),e.$set(c);const m={};_&32&&(m.data=s[5]),_&131072&&(m.$$scope={dirty:_,ctx:s}),o.$set(m)},i(s){i||(I(e.$$.fragment,s),I(o.$$.fragment,s),i=!0)},o(s){E(e.$$.fragment,s),E(o.$$.fragment,s),i=!1},d(s){s&&B(r),K(e,s),K(o,s)}}}function jt(t){let e,n,r,o;function i(u){t[11](u)}let a={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[At]},$$scope:{ctx:t}};return t[2]!==void 0&&(a.map=t[2]),n=new $e({props:a}),pe.push(()=>Te(n,"map",i)),{c(){e=A("div"),J(n.$$.fragment),R(e,"slot","main"),ne(e,"position","relative"),ne(e,"width","100%"),ne(e,"height","100vh")},m(u,s){T(u,e,s),G(n,e,null),o=!0},p(u,s){const _={};s&131120&&(_.$$scope={dirty:s,ctx:u}),!r&&s&4&&(r=!0,_.map=u[2],Be(()=>r=!1)),n.$set(_)},i(u){o||(I(n.$$.fragment,u),o=!0)},o(u){E(n.$$.fragment,u),o=!1},d(u){u&&B(e),K(n)}}}function It(t){let e,n;return e=new Ye({props:{$$slots:{main:[jt],left:[St]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(r,o){G(e,r,o),n=!0},p(r,[o]){const i={};o&131199&&(i.$$scope={dirty:o,ctx:r}),e.$set(i)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Et(t,e,n){xe(async()=>{await De(),await et()});let r,o,i={lng:0,lat:0},a={type:"FeatureCollection",features:[]},u=1e3,s="Distance",_={maxCount:1e3,originRadius:3,destinationRadius:3,streetviewOn:!1},c;async function m(g){try{let U=await c.files[0].arrayBuffer();n(3,o=new le(new Uint8Array(U)));let D=o.getBounds();r.fitBounds([[D[0],D[1]],[D[2],D[3]]],{padding:20,animate:!1}),n(4,i.lng=(D[0]+D[2])/2,i),n(4,i.lat=(D[1]+D[3])/2,i),v()}catch(U){window.alert(`Problem loading network file: ${U}`)}}function v(){o&&n(5,a=JSON.parse(o.recalculate({lng:i.lng,lat:i.lat,max_requests:u,cost:s})))}const L=[[]];function l(g){i=g,n(4,i)}function b(g){r=g,n(2,r)}function y(g){pe[g?"unshift":"push"](()=>{c=g,n(6,c)})}function M(){u=Oe(this.value),n(0,u)}function S(){s=this.__value,n(1,s)}function h(){s=this.__value,n(1,s)}return t.$$.update=()=>{t.$$.dirty&3&&v()},[u,s,r,o,i,a,c,_,m,v,l,b,y,M,S,L,h]}class Tt extends _e{constructor(e){super(),ge(this,e,Et,It,ue,{})}}new Tt({target:document.getElementById("app")});
