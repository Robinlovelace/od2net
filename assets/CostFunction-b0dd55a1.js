import{af as ke,ag as Se,S as be,i as ge,s as te,D as ne,l as T,t as W,r as de,b as G,u as we,v as M,ah as ve,T as Y,a7 as je,U as Q,ai as ie,E as x,G as Ae,J as Te,K as Me,N as Oe,Y as Ie,e as k,g as re,f as oe,j as I,k as Ce,n as S,p as _e,q as J,C as Fe,V as z,ab as K,ac as ye,aa as Be,h as L,w as me,a6 as Ee}from"./Legend-b21e3702.js";function We(t,e,n,r,o){let i=!1;t.getSource(e)&&(i=!0,t.removeSource(e));const _=()=>{r(e)&&(t.addSource(e,n),o())};if(i){const s=()=>{e&&(t.getSource(e)?setTimeout(s,1):_())};s()}else _()}function Le(t,e,n){ke().then(()=>{let r=Se(t);if(!r)return;r.getSource(e)===n&&r.removeSource(e)})}function ce(t){let e=t[0],n,r,o=se(t);return{c(){o.c(),n=ne()},m(i,_){o.m(i,_),T(i,n,_),r=!0},p(i,_){_&1&&te(e,e=i[0])?(de(),G(o,1,1,x),we(),o=se(i),o.c(),W(o,1),o.m(n.parentNode,n)):o.p(i,_)},i(i){r||(W(o),r=!0)},o(i){G(o),r=!1},d(i){i&&M(n),o.d(i)}}}function se(t){let e;const n=t[15].default,r=Ae(n,t,t[14],null);return{c(){r&&r.c()},m(o,i){r&&r.m(o,i),e=!0},p(o,i){r&&r.p&&(!e||i&16384)&&Te(r,n,o,o[14],e?Oe(n,o[14],i,null):Me(o[14]),null)},i(o){e||(W(r,o),e=!0)},o(o){G(r,o),e=!1},d(o){r&&r.d(o)}}}function Ne(t){let e,n,r=t[0]&&ce(t);return{c(){r&&r.c(),e=ne()},m(o,i){r&&r.m(o,i),T(o,e,i),n=!0},p(o,[i]){o[0]?r?(r.p(o,i),i&1&&W(r,1)):(r=ce(o),r.c(),W(r,1),r.m(e.parentNode,e)):r&&(de(),G(r,1,1,()=>{r=null}),we())},i(o){n||(W(r),n=!0)},o(o){G(r),n=!1},d(o){o&&M(e),r&&r.d(o)}}}function Re(t,e,n){let r,o,i,{$$slots:_={},$$scope:s}=e,{id:l=Ie("geojson")}=e,{data:g}=e,{generateId:a=!1}=e,{promoteId:h=void 0}=e,{filter:O=void 0}=e,{lineMetrics:y=void 0}=e,{cluster:f=void 0}=e;const{map:p,cluster:m,self:v}=ve();Y(t,p,d=>n(13,o=d)),Y(t,m,d=>n(16,i=d)),Y(t,v,d=>n(0,r=d));let j,P=!0;return je(()=>{r&&j&&o&&(Le(p,r,j),Q(v,r=null,r),n(11,j=void 0))}),t.$$set=d=>{"id"in d&&n(4,l=d.id),"data"in d&&n(5,g=d.data),"generateId"in d&&n(6,a=d.generateId),"promoteId"in d&&n(7,h=d.promoteId),"filter"in d&&n(8,O=d.filter),"lineMetrics"in d&&n(9,y=d.lineMetrics),"cluster"in d&&n(10,f=d.cluster),"$$scope"in d&&n(14,s=d.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&Q(m,i=f,i),t.$$.dirty&12273&&o&&r!==l&&(Q(v,r=l,r),We(o,r,ie({type:"geojson",data:g,filter:O,lineMetrics:y,generateId:a,promoteId:h,cluster:!!f,clusterMinPoints:f==null?void 0:f.minPoints,clusterMaxZoom:f==null?void 0:f.maxZoom,clusterRadius:f==null?void 0:f.radius,clusterProperties:f==null?void 0:f.properties}),d=>o&&d===r,()=>{r&&(n(11,j=o==null?void 0:o.getSource(r)),n(12,P=!0))})),t.$$.dirty&8208&&(o==null||o.on("style.load",()=>{n(11,j=o==null?void 0:o.getSource(l))})),t.$$.dirty&6176&&j&&(P?n(12,P=!1):j.setData(g)),t.$$.dirty&3072&&(j==null||j.setClusterOptions(ie({cluster:!!f,clusterMaxZoom:f==null?void 0:f.maxZoom,clusterRadius:f==null?void 0:f.radius})))},[r,p,m,v,l,g,a,h,O,y,f,j,P,o,s,_]}class xe extends be{constructor(e){super(),ge(this,e,Re,Ne,te,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}let u;const he=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&he.decode();let R=null;function H(){return(R===null||R.byteLength===0)&&(R=new Uint8Array(u.memory.buffer)),R}function B(t,e){return t=t>>>0,he.decode(H().subarray(t,t+e))}const A=new Array(128).fill(void 0);A.push(void 0,null,!0,!1);let Z=A.length;function b(t){Z===A.length&&A.push(A.length+1);const e=Z;return Z=A[e],A[e]=t,e}function c(t){return A[t]}let E=0;const V=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},De=typeof V.encodeInto=="function"?function(t,e){return V.encodeInto(t,e)}:function(t,e){const n=V.encode(t);return e.set(n),{read:t.length,written:n.length}};function X(t,e,n){if(n===void 0){const s=V.encode(t),l=e(s.length,1)>>>0;return H().subarray(l,l+s.length).set(s),E=s.length,l}let r=t.length,o=e(r,1)>>>0;const i=H();let _=0;for(;_<r;_++){const s=t.charCodeAt(_);if(s>127)break;i[o+_]=s}if(_!==r){_!==0&&(t=t.slice(_)),o=n(o,r,r=_+t.length*3,1)>>>0;const s=H().subarray(o+_,o+r),l=De(t,s);_+=l.written}return E=_,o}function N(t){return t==null}let D=null;function w(){return(D===null||D.byteLength===0)&&(D=new Int32Array(u.memory.buffer)),D}function Ue(t){t<132||(A[t]=Z,Z=t)}function C(t){const e=c(t);return Ue(t),e}let U=null;function pe(){return(U===null||U.byteLength===0)&&(U=new Float64Array(u.memory.buffer)),U}let q=null;function qe(){return(q===null||q.byteLength===0)&&(q=new BigInt64Array(u.memory.buffer)),q}function $(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const o=t.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=t.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(t)){const o=t.length;let i="[";o>0&&(i+=$(t[0]));for(let _=1;_<o;_++)i+=", "+$(t[_]);return i+="]",i}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function He(t,e){const n=e(t.length*1,1)>>>0;return H().set(t,n/1),E=t.length,n}function Ze(t,e){return t=t>>>0,pe().subarray(t/8,t/8+e)}function F(t,e){try{return t.apply(this,e)}catch(n){u.__wbindgen_exn_store(b(n))}}class ee{static __wrap(e){e=e>>>0;const n=Object.create(ee.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();u.__wbg_jsnetwork_free(e)}constructor(e){try{const i=u.__wbindgen_add_to_stack_pointer(-16),_=He(e,u.__wbindgen_malloc),s=E;u.jsnetwork_new(i,_,s);var n=w()[i/4+0],r=w()[i/4+1],o=w()[i/4+2];if(o)throw C(r);return ee.__wrap(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}recalculate(e){let n,r;try{const a=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_recalculate(a,this.__wbg_ptr,b(e));var o=w()[a/4+0],i=w()[a/4+1],_=w()[a/4+2],s=w()[a/4+3],l=o,g=i;if(s)throw l=0,g=0,C(_);return n=l,r=g,B(l,g)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_free(n,r,1)}}updateCostFunction(e){try{const o=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_updateCostFunction(o,this.__wbg_ptr,b(e));var n=w()[o/4+0],r=w()[o/4+1];if(r)throw C(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}getBounds(){try{const o=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_getBounds(o,this.__wbg_ptr);var e=w()[o/4+0],n=w()[o/4+1],r=Ze(e,n).slice();return u.__wbindgen_free(e,n*8),r}finally{u.__wbindgen_add_to_stack_pointer(16)}}debugNetwork(){let e,n;try{const g=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_debugNetwork(g,this.__wbg_ptr);var r=w()[g/4+0],o=w()[g/4+1],i=w()[g/4+2],_=w()[g/4+3],s=r,l=o;if(_)throw s=0,l=0,C(i);return e=s,n=l,B(s,l)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_free(e,n,1)}}}async function Ge(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Je(){const t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(e,n){const r=B(e,n);return b(r)},t.wbg.__wbindgen_string_get=function(e,n){const r=c(n),o=typeof r=="string"?r:void 0;var i=N(o)?0:X(o,u.__wbindgen_malloc,u.__wbindgen_realloc),_=E;w()[e/4+1]=_,w()[e/4+0]=i},t.wbg.__wbindgen_object_drop_ref=function(e){C(e)},t.wbg.__wbindgen_number_get=function(e,n){const r=c(n),o=typeof r=="number"?r:void 0;pe()[e/8+1]=N(o)?0:o,w()[e/4+0]=!N(o)},t.wbg.__wbindgen_is_string=function(e){return typeof c(e)=="string"},t.wbg.__wbindgen_is_object=function(e){const n=c(e);return typeof n=="object"&&n!==null},t.wbg.__wbindgen_is_undefined=function(e){return c(e)===void 0},t.wbg.__wbindgen_in=function(e,n){return c(e)in c(n)},t.wbg.__wbindgen_is_bigint=function(e){return typeof c(e)=="bigint"},t.wbg.__wbindgen_bigint_from_u64=function(e){const n=BigInt.asUintN(64,e);return b(n)},t.wbg.__wbindgen_jsval_eq=function(e,n){return c(e)===c(n)},t.wbg.__wbindgen_error_new=function(e,n){const r=new Error(B(e,n));return b(r)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=c(e);return b(n)},t.wbg.__wbindgen_jsval_loose_eq=function(e,n){return c(e)==c(n)},t.wbg.__wbindgen_boolean_get=function(e){const n=c(e);return typeof n=="boolean"?n?1:0:2},t.wbg.__wbindgen_number_new=function(e){return b(e)},t.wbg.__wbg_getwithrefkey_3b3c46ba20582127=function(e,n){const r=c(e)[c(n)];return b(r)},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return b(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const r=c(n).stack,o=X(r,u.__wbindgen_malloc,u.__wbindgen_realloc),i=E;w()[e/4+1]=i,w()[e/4+0]=o},t.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let r,o;try{r=e,o=n,console.error(B(e,n))}finally{u.__wbindgen_free(r,o,1)}},t.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(e,n){const r=c(e)[c(n)];return b(r)},t.wbg.__wbg_set_841ac57cff3d672b=function(e,n,r){c(e)[C(n)]=C(r)},t.wbg.__wbg_now_0cfdc90c97d0c24b=function(e){return c(e).now()},t.wbg.__wbg_debug_9a6b3243fbbebb61=function(e){console.debug(c(e))},t.wbg.__wbg_error_788ae33f81d3b84b=function(e){console.error(c(e))},t.wbg.__wbg_info_2e30e8204b29d91d=function(e){console.info(c(e))},t.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(c(e))},t.wbg.__wbg_warn_d60e832f9882c1b2=function(e){console.warn(c(e))},t.wbg.__wbg_get_44be0491f933a435=function(e,n){const r=c(e)[n>>>0];return b(r)},t.wbg.__wbg_length_fff51ee6522a1a18=function(e){return c(e).length},t.wbg.__wbg_new_898a68150f225f2e=function(){const e=new Array;return b(e)},t.wbg.__wbindgen_is_function=function(e){return typeof c(e)=="function"},t.wbg.__wbg_newnoargs_581967eacc0e2604=function(e,n){const r=new Function(B(e,n));return b(r)},t.wbg.__wbg_next_526fc47e980da008=function(e){const n=c(e).next;return b(n)},t.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return F(function(e){const n=c(e).next();return b(n)},arguments)},t.wbg.__wbg_done_5c1f01fb660d73b5=function(e){return c(e).done},t.wbg.__wbg_value_1695675138684bd5=function(e){const n=c(e).value;return b(n)},t.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return b(Symbol.iterator)},t.wbg.__wbg_get_97b561fb56f034b5=function(){return F(function(e,n){const r=Reflect.get(c(e),c(n));return b(r)},arguments)},t.wbg.__wbg_call_cb65541d95d71282=function(){return F(function(e,n){const r=c(e).call(c(n));return b(r)},arguments)},t.wbg.__wbg_new_b51585de1b234aff=function(){const e=new Object;return b(e)},t.wbg.__wbg_self_1ff1d729e9aae938=function(){return F(function(){const e=self.self;return b(e)},arguments)},t.wbg.__wbg_window_5f4faef6c12b79ec=function(){return F(function(){const e=window.window;return b(e)},arguments)},t.wbg.__wbg_globalThis_1d39714405582d3c=function(){return F(function(){const e=globalThis.globalThis;return b(e)},arguments)},t.wbg.__wbg_global_651f05c6a0944d1c=function(){return F(function(){const e=global.global;return b(e)},arguments)},t.wbg.__wbg_set_502d29070ea18557=function(e,n,r){c(e)[n>>>0]=C(r)},t.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(e){let n;try{n=c(e)instanceof ArrayBuffer}catch{n=!1}return n},t.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(e){return Number.isSafeInteger(c(e))},t.wbg.__wbg_entries_e51f29c7bba0c054=function(e){const n=Object.entries(c(e));return b(n)},t.wbg.__wbg_buffer_085ec1f694018c4f=function(e){const n=c(e).buffer;return b(n)},t.wbg.__wbg_new_8125e318e6245eed=function(e){const n=new Uint8Array(c(e));return b(n)},t.wbg.__wbg_set_5cf90238115182c3=function(e,n,r){c(e).set(c(n),r>>>0)},t.wbg.__wbg_length_72e2208bbc0efc61=function(e){return c(e).length},t.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(e){let n;try{n=c(e)instanceof Uint8Array}catch{n=!1}return n},t.wbg.__wbindgen_bigint_get_as_i64=function(e,n){const r=c(n),o=typeof r=="bigint"?r:void 0;qe()[e/8+1]=N(o)?BigInt(0):o,w()[e/4+0]=!N(o)},t.wbg.__wbindgen_debug_string=function(e,n){const r=$(c(n)),o=X(r,u.__wbindgen_malloc,u.__wbindgen_realloc),i=E;w()[e/4+1]=i,w()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,n){throw new Error(B(e,n))},t.wbg.__wbindgen_memory=function(){const e=u.memory;return b(e)},t}function Pe(t,e){return u=t.exports,Ve.__wbindgen_wasm_module=e,q=null,U=null,D=null,R=null,u}async function Ve(t){if(u!==void 0)return u;typeof t>"u"&&(t="/od2net/assets/wasm_od2net_bg.wasm");const e=Je();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await Ge(await t,e);return Pe(n,r)}function ue(t,e,n){const r=t.slice();return r[10]=e[n],r[13]=e,r[14]=n,r}function le(t,e,n){const r=t.slice();return r[10]=e[n],r[11]=e,r[12]=n,r}function ze(t){let e,n=K(["lts1","lts2","lts3","lts4"]),r=[];for(let o=0;o<4;o+=1)r[o]=fe(ue(t,n,o));return{c(){e=k("ul");for(let o=0;o<4;o+=1)r[o].c()},m(o,i){T(o,e,i);for(let _=0;_<4;_+=1)r[_]&&r[_].m(e,null)},p(o,i){if(i&5){n=K(["lts1","lts2","lts3","lts4"]);let _;for(_=0;_<4;_+=1){const s=ue(o,n,_);r[_]?r[_].p(s,i):(r[_]=fe(s),r[_].c(),r[_].m(e,null))}for(;_<4;_+=1)r[_].d(1)}},d(o){o&&M(e),ye(r,o)}}}function Ke(t){let e,n=K(Object.keys(t[3])),r=[];for(let o=0;o<n.length;o+=1)r[o]=ae(le(t,n,o));return{c(){e=k("ul");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,i){T(o,e,i);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(e,null)},p(o,i){if(i&9){n=K(Object.keys(o[3]));let _;for(_=0;_<n.length;_+=1){const s=le(o,n,_);r[_]?r[_].p(s,i):(r[_]=ae(s),r[_].c(),r[_].m(e,null))}for(;_<r.length;_+=1)r[_].d(1);r.length=n.length}},d(o){o&&M(e),ye(r,o)}}}function fe(t){let e,n,r=Be[t[10]]+"",o,i,_,s,l;function g(){t[7].call(i,t[10])}return{c(){e=k("li"),n=k("label"),o=re(r),i=k("input"),_=oe(),L(i,"type","number"),L(i,"min","1.0"),L(i,"step","0.1")},m(a,h){T(a,e,h),S(e,n),S(n,o),S(n,i),I(i,t[2][t[10]]),S(e,_),s||(l=[J(i,"input",g),J(i,"change",t[8])],s=!0)},p(a,h){t=a,h&4&&z(i.value)!==t[2][t[10]]&&I(i,t[2][t[10]])},d(a){a&&M(e),s=!1,me(l)}}}function ae(t){let e,n,r=t[10]+"",o,i,_,s,l;function g(){t[5].call(i,t[10])}return{c(){e=k("li"),n=k("label"),o=re(r),i=k("input"),_=oe(),L(i,"type","number"),L(i,"min","1.0"),L(i,"step","0.1")},m(a,h){T(a,e,h),S(e,n),S(n,o),S(n,i),I(i,t[3][t[10]]),S(e,_),s||(l=[J(i,"input",g),J(i,"change",t[6])],s=!0)},p(a,h){t=a,h&8&&r!==(r=t[10]+"")&&Ee(o,r),h&8&&z(i.value)!==t[3][t[10]]&&I(i,t[3][t[10]])},d(a){a&&M(e),s=!1,me(l)}}}function Ye(t){let e,n,r,o,i,_,s,l,g,a,h,O;function y(m,v){if(m[1]=="OsmHighwayType")return Ke;if(m[1]=="ByLTS")return ze}let f=y(t),p=f&&f(t);return{c(){e=k("div"),n=k("label"),r=re(`Cost function:
    `),o=k("select"),i=k("option"),i.textContent="Distance",_=k("option"),_.textContent="Avoid main roads",s=k("option"),s.textContent="Weight per LTS",l=k("option"),l.textContent="Set a weight per OSM highway type",g=oe(),p&&p.c(),a=ne(),i.__value="Distance",I(i,i.__value),_.__value="AvoidMainRoads",I(_,_.__value),s.__value="ByLTS",I(s,s.__value),l.__value="OsmHighwayType",I(l,l.__value),t[1]===void 0&&Ce(()=>t[4].call(o))},m(m,v){T(m,e,v),S(e,n),S(n,r),S(n,o),S(o,i),S(o,_),S(o,s),S(o,l),_e(o,t[1],!0),T(m,g,v),p&&p.m(m,v),T(m,a,v),h||(O=J(o,"change",t[4]),h=!0)},p(m,[v]){v&2&&_e(o,m[1]),f===(f=y(m))&&p?p.p(m,v):(p&&p.d(1),p=f&&f(m),p&&(p.c(),p.m(a.parentNode,a)))},i:x,o:x,d(m){m&&(M(e),M(g),M(a)),p&&p.d(m),h=!1,O()}}}function Qe(t,e,n){let{cost:r}=e,o="Distance",i={lts1:1,lts2:1,lts3:1,lts4:1},_={};for(let y of["cycleway","footway","living_street","motorway","motorway_link","path","pedestrian","primary","primary_link","residential","secondary","secondary_link","service","steps","tertiary","tertiary_link","track","trunk","trunk_link","unclassified"])_[y]=1;function s(y){y=="OsmHighwayType"?n(0,r={OsmHighwayType:_}):y=="ByLTS"?n(0,r={ByLTS:i}):n(0,r=y)}function l(){o=Fe(this),n(1,o)}function g(y){_[y]=z(this.value),n(3,_)}const a=()=>n(0,r);function h(y){i[y]=z(this.value),n(2,i)}const O=()=>n(0,r);return t.$$set=y=>{"cost"in y&&n(0,r=y.cost)},t.$$.update=()=>{t.$$.dirty&2&&s(o)},[r,o,i,_,l,g,a,h,O]}class $e extends be{constructor(e){super(),ge(this,e,Qe,Ye,te,{cost:0})}}export{$e as C,xe as G,ee as J,Ve as _};
