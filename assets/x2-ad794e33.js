import{S as te,i as ne,s as se,G as fe,e as E,h as P,z as G,l as I,I as Q,q as O,J as ue,K as ce,N as pe,O as de,t as h,b as C,v as S,w as me,Q as ge,R as _e,T as U,U as V,m as be,L as he,c as D,f as j,a as q,d as J,o as we,H as Le,x as T,y as H,g as W,n as M,A as K,r as X,u as Y,M as ye,_ as ve,V as ae,j as $,D as Ce,E as ke,W as Me}from"./Legend-36db5a45.js";import{L as Be,C as ze,_ as Ee,J as Ie,a as Se,G as De}from"./Loading-daad1982.js";import{S as qe,L as Je}from"./SidebarControls-5b3d2c73.js";function Ne(a){let e,t,l,n,o,f,c;const s=a[16].default,r=fe(s,a,a[15],null);return{c(){e=E("div"),r&&r.c(),P(e,"tabindex",t=a[1]?0:void 0),P(e,"role",l=a[1]?"button":void 0),G(e,"z-index",a[2])},m(i,p){I(i,e,p),r&&r.m(e,null),o=!0,f||(c=[Q(a[6].call(null,e)),Q(n=Oe.call(null,e,a[0])),O(e,"click",a[17]),O(e,"dblclick",a[18]),O(e,"contextmenu",a[19]),O(e,"mouseenter",a[20]),O(e,"mouseleave",a[21]),O(e,"mousemove",a[22]),O(e,"keydown",a[7])],f=!0)},p(i,[p]){r&&r.p&&(!o||p&32768)&&ue(r,s,i,i[15],o?pe(s,i[15],p,null):ce(i[15]),null),(!o||p&2&&t!==(t=i[1]?0:void 0))&&P(e,"tabindex",t),(!o||p&2&&l!==(l=i[1]?"button":void 0))&&P(e,"role",l),n&&de(n.update)&&p&1&&n.update.call(null,i[0]),p&4&&G(e,"z-index",i[2])},i(i){o||(h(r,i),o=!0)},o(i){C(r,i),o=!1},d(i){i&&S(e),r&&r.d(i),f=!1,me(c)}}}function Oe(a,e){const t=a.className;function l(n){n?a.className=`${t} ${n}`:a.className=t}return l(e),{update:l}}function Pe(a,e,t){let l,n,o,{$$slots:f={},$$scope:c}=e,{lngLat:s}=e,{class:r=void 0}=e,{interactive:i=!0}=e,{asButton:p=!1}=e,{draggable:w=!1}=e,{feature:B=null}=e,{offset:y=void 0}=e,{zIndex:d=void 0}=e;const v=ge(),{map:N,layerEvent:A,self:m}=_e();U(a,N,u=>t(24,o=u)),U(a,A,u=>t(23,l=u)),U(a,m,u=>t(14,n=u));function _(u){V(m,n=new be.Marker({element:u,draggable:w,offset:y}).setLngLat(s).addTo(o),n);const R=()=>L("dragstart"),F=()=>{g(),L("drag")},Z=()=>{g(),L("dragend")};return w&&(n.on("dragstart",R),n.on("drag",F),n.on("dragend",Z)),{destroy(){w&&(n==null||n.off("dragstart",R),n==null||n.off("drag",F),n==null||n.off("dragend",Z)),n==null||n.remove()}}}function g(){let u=n==null?void 0:n.getLngLat();u&&(Array.isArray(s)?t(9,s=[u.lng,u.lat]):s&&"lon"in s?t(9,s={lon:u.lng,lat:u.lat}):t(9,s=u))}function z(u){u.key===" "&&(u.preventDefault(),u.stopPropagation(),L("click"))}function L(u){if(!i)return;let R=n==null?void 0:n.getLngLat();if(!R)return;const F=[R.lng,R.lat];let Z={map:o,marker:n,lngLat:F,features:[{type:"Feature",properties:(B==null?void 0:B.properties)??{},geometry:{type:"Point",coordinates:F}}]};V(A,l={...Z,layerType:"marker",type:u},l),v(u,Z)}const b=()=>L("click"),k=()=>L("dblclick"),le=()=>L("contextmenu"),oe=u=>{L("mouseenter")},ie=()=>{L("mouseleave")},re=()=>L("mousemove");return a.$$set=u=>{"lngLat"in u&&t(9,s=u.lngLat),"class"in u&&t(0,r=u.class),"interactive"in u&&t(10,i=u.interactive),"asButton"in u&&t(1,p=u.asButton),"draggable"in u&&t(11,w=u.draggable),"feature"in u&&t(12,B=u.feature),"offset"in u&&t(13,y=u.offset),"zIndex"in u&&t(2,d=u.zIndex),"$$scope"in u&&t(15,c=u.$$scope)},a.$$.update=()=>{a.$$.dirty&16896&&(n==null||n.setLngLat(s)),a.$$.dirty&24576&&(n==null||n.setOffset(y??[0,0]))},[r,p,d,N,A,m,_,z,L,s,i,w,B,y,n,c,f,b,k,le,oe,ie,re]}class je extends te{constructor(e){super(),ne(this,e,Pe,Ne,se,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2})}}const Ae=`<svg width="40" height="50" viewBox="0 0 40 50" xmlns="http://www.w3.org/2000/svg">
    <defs/>
    <path id="path2" fill="none" stroke="none" visibility="hidden" d="M 1.0169492 25.59322 L 25.016949 25.59322 L 25.016949 49.59322 L 1.0169492 49.59322 Z"/>
    <path id="path4" fill="#000000" stroke="none" d="M 19.198305 2.6101693 C 10.336661 2.6101693 3.1694916 9.7773384 3.1694916 18.638983 C 3.1694916 30.660593 19.198305 48.406779 19.198305 48.406779 C 19.198305 48.406779 35.227118 30.660593 35.227118 18.638983 C 35.227118 9.7773384 28.059949 2.6101693 19.198305 2.6101693 Z M 19.198305 24.363559 C 16.038339 24.363559 13.473728 21.798949 13.473728 18.638983 C 13.473728 15.479016 16.038339 12.914406 19.198305 12.914406 C 22.358271 12.914406 24.922881 15.479016 24.922881 18.638983 C 24.922881 21.798949 22.358271 24.363559 19.198305 24.363559 Z"/>
</svg>
`;function x(a){let e,t,l,n,o,f,c,s,r,i,p,w;function B(d){a[17](d)}let y={};return a[2]!==void 0&&(y.cost=a[2]),s=new Se({props:y}),T.push(()=>H(s,"cost",B)),{c(){e=E("div"),t=E("label"),l=W("Max requests (limit for faster updates):"),n=E("br"),o=j(),f=E("input"),c=j(),D(s.$$.fragment),P(f,"type","number"),P(f,"min",1)},m(d,v){I(d,e,v),M(e,t),M(t,l),M(t,n),M(t,o),M(t,f),$(f,a[1]),I(d,c,v),q(s,d,v),i=!0,p||(w=O(f,"input",a[16]),p=!0)},p(d,v){v&2&&ae(f.value)!==d[1]&&$(f,d[1]);const N={};!r&&v&4&&(r=!0,N.cost=d[2],K(()=>r=!1)),s.$set(N)},i(d){i||(h(s.$$.fragment,d),i=!0)},o(d){C(s.$$.fragment,d),i=!1},d(d){d&&(S(e),S(c)),J(s,d),p=!1,w()}}}function ee(a){let e,t,l,n,o;function f(s){a[18](s)}let c={outputMetadata:a[6].metadata,map:a[3]};return a[8]!==void 0&&(c.controls=a[8]),l=new qe({props:c}),T.push(()=>H(l,"controls",f)),{c(){e=E("hr"),t=j(),D(l.$$.fragment)},m(s,r){I(s,e,r),I(s,t,r),q(l,s,r),o=!0},p(s,r){const i={};r&64&&(i.outputMetadata=s[6].metadata),r&8&&(i.map=s[3]),!n&&r&256&&(n=!0,i.controls=s[8],K(()=>n=!1)),l.$set(i)},i(s){o||(h(l.$$.fragment,s),o=!0)},o(s){C(l.$$.fragment,s),o=!1},d(s){s&&(S(e),S(t)),J(l,s)}}}function Re(a){let e,t,l,n,o,f,c,s,r,i,p,w,B,y,d,v;t=new Le({props:{app:"interactive"}});function N(g){a[15](g)}let A={};a[0]!==void 0&&(A.example=a[0]),i=new ze({props:A}),T.push(()=>H(i,"example",N));let m=a[4]&&x(a),_=a[6].metadata&&ee(a);return{c(){e=E("div"),D(t.$$.fragment),l=j(),n=E("label"),o=W("Open an "),f=E("i"),f.textContent=".osm.pbf",c=W(` file
      `),s=E("input"),r=j(),D(i.$$.fragment),w=j(),m&&m.c(),B=j(),_&&_.c(),P(s,"type","file"),P(e,"slot","left")},m(g,z){I(g,e,z),q(t,e,null),M(e,l),M(e,n),M(n,o),M(n,f),M(n,c),M(n,s),a[14](s),M(e,r),q(i,e,null),M(e,w),m&&m.m(e,null),M(e,B),_&&_.m(e,null),y=!0,d||(v=O(s,"change",a[10]),d=!0)},p(g,z){const L={};!p&&z&1&&(p=!0,L.example=g[0],K(()=>p=!1)),i.$set(L),g[4]?m?(m.p(g,z),z&16&&h(m,1)):(m=x(g),m.c(),h(m,1),m.m(e,B)):m&&(X(),C(m,1,1,()=>{m=null}),Y()),g[6].metadata?_?(_.p(g,z),z&64&&h(_,1)):(_=ee(g),_.c(),h(_,1),_.m(e,null)):_&&(X(),C(_,1,1,()=>{_=null}),Y())},i(g){y||(h(t.$$.fragment,g),h(i.$$.fragment,g),h(m),h(_),y=!0)},o(g){C(t.$$.fragment,g),C(i.$$.fragment,g),C(m),C(_),y=!1},d(g){g&&S(e),J(t),a[14](null),J(i),m&&m.d(),_&&_.d(),d=!1,v()}}}function Te(a){let e,t;return{c(){e=new Me(!1),t=Ce(),e.a=t},m(l,n){e.m(Ae,l,n),I(l,t,n)},p:ke,d(l){l&&(S(t),e.d())}}}function Fe(a){let e,t;return e=new Je({props:{controls:a[8]}}),{c(){D(e.$$.fragment)},m(l,n){q(e,l,n),t=!0},p(l,n){const o={};n&256&&(o.controls=l[8]),e.$set(o)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ze(a){let e,t,l,n,o;function f(s){a[12](s)}let c={draggable:!0,$$slots:{default:[Te]},$$scope:{ctx:a}};return a[5]!==void 0&&(c.lngLat=a[5]),e=new je({props:c}),T.push(()=>H(e,"lngLat",f)),e.$on("dragend",a[11]),n=new De({props:{data:a[6],$$slots:{default:[Fe]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment),l=j(),D(n.$$.fragment)},m(s,r){q(e,s,r),I(s,l,r),q(n,s,r),o=!0},p(s,r){const i={};r&2097152&&(i.$$scope={dirty:r,ctx:s}),!t&&r&32&&(t=!0,i.lngLat=s[5],K(()=>t=!1)),e.$set(i);const p={};r&64&&(p.data=s[6]),r&2097408&&(p.$$scope={dirty:r,ctx:s}),n.$set(p)},i(s){o||(h(e.$$.fragment,s),h(n.$$.fragment,s),o=!0)},o(s){C(e.$$.fragment,s),C(n.$$.fragment,s),o=!1},d(s){s&&S(l),J(e,s),J(n,s)}}}function Ge(a){let e,t,l,n;function o(c){a[13](c)}let f={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Ze]},$$scope:{ctx:a}};return a[3]!==void 0&&(f.map=a[3]),t=new ye({props:f}),T.push(()=>H(t,"map",o)),{c(){e=E("div"),D(t.$$.fragment),P(e,"slot","main"),G(e,"position","relative"),G(e,"width","100%"),G(e,"height","100vh")},m(c,s){I(c,e,s),q(t,e,null),n=!0},p(c,s){const r={};s&2097504&&(r.$$scope={dirty:s,ctx:c}),!l&&s&8&&(l=!0,r.map=c[3],K(()=>l=!1)),t.$set(r)},i(c){n||(h(t.$$.fragment,c),n=!0)},o(c){C(t.$$.fragment,c),n=!1},d(c){c&&S(e),J(t)}}}function He(a){let e,t,l,n;return e=new he({props:{$$slots:{main:[Ge],left:[Re]},$$scope:{ctx:a}}}),l=new Be({props:{loading:a[7]}}),{c(){D(e.$$.fragment),t=j(),D(l.$$.fragment)},m(o,f){q(e,o,f),I(o,t,f),q(l,o,f),n=!0},p(o,[f]){const c={};f&2098047&&(c.$$scope={dirty:f,ctx:o}),e.$set(c);const s={};f&128&&(s.loading=o[7]),l.$set(s)},i(o){n||(h(e.$$.fragment,o),h(l.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),C(l.$$.fragment,o),n=!1},d(o){o&&S(t),J(e,o),J(l,o)}}}function Ke(a,e,t){we(async()=>{await Ee(),await ve()});let l,n,o="",f={lng:0,lat:0},c={type:"FeatureCollection",features:[]},s=!1,r=1e3,i="Distance",p={maxCount:1e3,originRadius:3,destinationRadius:3,streetviewOn:!1},w;async function B(b){t(0,o=""),t(7,s=!0),y(await w.files[0].arrayBuffer())}function y(b){try{t(4,n=new Ie(new Uint8Array(b))),t(2,i="Distance");let k=n.getBounds();l.fitBounds([[k[0],k[1]],[k[2],k[3]]],{padding:20,animate:!1}),t(5,f.lng=(k[0]+k[2])/2,f),t(5,f.lat=(k[1]+k[3])/2,f),v()}catch(k){window.alert(`Problem importing osm.pbf file: ${k}`)}t(7,s=!1)}async function d(b){if(b!=""){t(7,s=!0);let k=await fetch(`https://assets.od2net.org/pbf_clips/${b}.osm.pbf`);y(await k.arrayBuffer())}}function v(){n&&t(6,c=JSON.parse(n.recalculate({lng:f.lng,lat:f.lat,max_requests:r,cost:i})))}function N(b){f=b,t(5,f)}function A(b){l=b,t(3,l)}function m(b){T[b?"unshift":"push"](()=>{w=b,t(9,w)})}function _(b){o=b,t(0,o)}function g(){r=ae(this.value),t(1,r)}function z(b){i=b,t(2,i)}function L(b){p=b,t(8,p)}return a.$$.update=()=>{a.$$.dirty&1&&d(o),a.$$.dirty&6&&v()},[o,r,i,l,n,f,c,s,p,w,B,v,N,A,m,_,g,z,L]}class Ue extends te{constructor(e){super(),ne(this,e,Ke,He,se,{})}}new Ue({target:document.getElementById("app")});
