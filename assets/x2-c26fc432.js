import{S as ee,i as te,s as ne,G as ue,e as z,h as O,z as F,l as E,I as W,q as N,J as pe,K as ce,N as de,O as me,t as h,b as v,v as I,w as ge,Q as _e,R as be,T as K,U as Q,m as he,L as we,c as S,f as P,a as D,d as q,o as Le,H as ye,x as Z,y as G,g as U,n as k,A as H,r as V,u as X,M as ve,_ as Ce,V as ae,j as Y,E as se,D as ke,W as Me}from"./Legend-36db5a45.js";import{L as Be,C as ze,_ as Ee,J as Ie,a as Se,G as De}from"./Loading-275fda0a.js";import{S as qe,L as Je}from"./SidebarControls-5b3d2c73.js";function Ne(a){let e,t,o,n,l,i,p;const s=a[16].default,f=ue(s,a,a[15],null);return{c(){e=z("div"),f&&f.c(),O(e,"tabindex",t=a[1]?0:void 0),O(e,"role",o=a[1]?"button":void 0),F(e,"z-index",a[2])},m(r,d){E(r,e,d),f&&f.m(e,null),l=!0,i||(p=[W(a[6].call(null,e)),W(n=Oe.call(null,e,a[0])),N(e,"click",a[17]),N(e,"dblclick",a[18]),N(e,"contextmenu",a[19]),N(e,"mouseenter",a[20]),N(e,"mouseleave",a[21]),N(e,"mousemove",a[22]),N(e,"keydown",a[7])],i=!0)},p(r,[d]){f&&f.p&&(!l||d&32768)&&pe(f,s,r,r[15],l?de(s,r[15],d,null):ce(r[15]),null),(!l||d&2&&t!==(t=r[1]?0:void 0))&&O(e,"tabindex",t),(!l||d&2&&o!==(o=r[1]?"button":void 0))&&O(e,"role",o),n&&me(n.update)&&d&1&&n.update.call(null,r[0]),d&4&&F(e,"z-index",r[2])},i(r){l||(h(f,r),l=!0)},o(r){v(f,r),l=!1},d(r){r&&I(e),f&&f.d(r),i=!1,ge(p)}}}function Oe(a,e){const t=a.className;function o(n){n?a.className=`${t} ${n}`:a.className=t}return o(e),{update:o}}function Pe(a,e,t){let o,n,l,{$$slots:i={},$$scope:p}=e,{lngLat:s}=e,{class:f=void 0}=e,{interactive:r=!0}=e,{asButton:d=!1}=e,{draggable:w=!1}=e,{feature:M=null}=e,{offset:L=void 0}=e,{zIndex:m=void 0}=e;const y=_e(),{map:J,layerEvent:j,self:g}=be();K(a,J,u=>t(24,l=u)),K(a,j,u=>t(23,o=u)),K(a,g,u=>t(14,n=u));function b(u){Q(g,n=new he.Marker({element:u,draggable:w,offset:L}).setLngLat(s).addTo(l),n);const A=()=>c("dragstart"),R=()=>{_(),c("drag")},T=()=>{_(),c("dragend")};return w&&(n.on("dragstart",A),n.on("drag",R),n.on("dragend",T)),{destroy(){w&&(n==null||n.off("dragstart",A),n==null||n.off("drag",R),n==null||n.off("dragend",T)),n==null||n.remove()}}}function _(){let u=n==null?void 0:n.getLngLat();u&&(Array.isArray(s)?t(9,s=[u.lng,u.lat]):s&&"lon"in s?t(9,s={lon:u.lng,lat:u.lat}):t(9,s=u))}function B(u){u.key===" "&&(u.preventDefault(),u.stopPropagation(),c("click"))}function c(u){if(!r)return;let A=n==null?void 0:n.getLngLat();if(!A)return;const R=[A.lng,A.lat];let T={map:l,marker:n,lngLat:R,features:[{type:"Feature",properties:(M==null?void 0:M.properties)??{},geometry:{type:"Point",coordinates:R}}]};Q(j,o={...T,layerType:"marker",type:u},o),y(u,T)}const C=()=>c("click"),le=()=>c("dblclick"),oe=()=>c("contextmenu"),ie=u=>{c("mouseenter")},re=()=>{c("mouseleave")},fe=()=>c("mousemove");return a.$$set=u=>{"lngLat"in u&&t(9,s=u.lngLat),"class"in u&&t(0,f=u.class),"interactive"in u&&t(10,r=u.interactive),"asButton"in u&&t(1,d=u.asButton),"draggable"in u&&t(11,w=u.draggable),"feature"in u&&t(12,M=u.feature),"offset"in u&&t(13,L=u.offset),"zIndex"in u&&t(2,m=u.zIndex),"$$scope"in u&&t(15,p=u.$$scope)},a.$$.update=()=>{a.$$.dirty&16896&&(n==null||n.setLngLat(s)),a.$$.dirty&24576&&(n==null||n.setOffset(L??[0,0]))},[f,d,m,J,j,g,b,B,c,s,r,w,M,L,n,p,i,C,le,oe,ie,re,fe]}class je extends ee{constructor(e){super(),te(this,e,Pe,Ne,ne,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2})}}const Ae=`<svg width="40" height="50" viewBox="0 0 40 50" xmlns="http://www.w3.org/2000/svg">
    <defs/>
    <path id="path2" fill="none" stroke="none" visibility="hidden" d="M 1.0169492 25.59322 L 25.016949 25.59322 L 25.016949 49.59322 L 1.0169492 49.59322 Z"/>
    <path id="path4" fill="#000000" stroke="none" d="M 19.198305 2.6101693 C 10.336661 2.6101693 3.1694916 9.7773384 3.1694916 18.638983 C 3.1694916 30.660593 19.198305 48.406779 19.198305 48.406779 C 19.198305 48.406779 35.227118 30.660593 35.227118 18.638983 C 35.227118 9.7773384 28.059949 2.6101693 19.198305 2.6101693 Z M 19.198305 24.363559 C 16.038339 24.363559 13.473728 21.798949 13.473728 18.638983 C 13.473728 15.479016 16.038339 12.914406 19.198305 12.914406 C 22.358271 12.914406 24.922881 15.479016 24.922881 18.638983 C 24.922881 21.798949 22.358271 24.363559 19.198305 24.363559 Z"/>
</svg>
`;function $(a){let e,t,o,n,l,i,p,s,f,r,d,w;function M(m){a[17](m)}let L={};return a[2]!==void 0&&(L.cost=a[2]),s=new Se({props:L}),Z.push(()=>G(s,"cost",M)),{c(){e=z("div"),t=z("label"),o=U("Max requests (limit for faster updates):"),n=z("br"),l=P(),i=z("input"),p=P(),S(s.$$.fragment),O(i,"type","number"),O(i,"min",1)},m(m,y){E(m,e,y),k(e,t),k(t,o),k(t,n),k(t,l),k(t,i),Y(i,a[1]),E(m,p,y),D(s,m,y),r=!0,d||(w=N(i,"input",a[16]),d=!0)},p(m,y){y&2&&ae(i.value)!==m[1]&&Y(i,m[1]);const J={};!f&&y&4&&(f=!0,J.cost=m[2],H(()=>f=!1)),s.$set(J)},i(m){r||(h(s.$$.fragment,m),r=!0)},o(m){v(s.$$.fragment,m),r=!1},d(m){m&&(I(e),I(p)),q(s,m),d=!1,w()}}}function x(a){let e,t,o,n;return o=new qe({props:{outputMetadata:a[6].metadata,map:a[3],controls:a[9]}}),{c(){e=z("hr"),t=P(),S(o.$$.fragment)},m(l,i){E(l,e,i),E(l,t,i),D(o,l,i),n=!0},p(l,i){const p={};i&64&&(p.outputMetadata=l[6].metadata),i&8&&(p.map=l[3]),o.$set(p)},i(l){n||(h(o.$$.fragment,l),n=!0)},o(l){v(o.$$.fragment,l),n=!1},d(l){l&&(I(e),I(t)),q(o,l)}}}function Re(a){let e,t,o,n,l,i,p,s,f,r,d,w,M,L,m,y;t=new ye({props:{app:"interactive"}});function J(_){a[15](_)}let j={};a[0]!==void 0&&(j.example=a[0]),r=new ze({props:j}),Z.push(()=>G(r,"example",J));let g=a[4]&&$(a),b=a[6].metadata&&x(a);return{c(){e=z("div"),S(t.$$.fragment),o=P(),n=z("label"),l=U("Open an "),i=z("i"),i.textContent=".osm.pbf",p=U(` file
      `),s=z("input"),f=P(),S(r.$$.fragment),w=P(),g&&g.c(),M=P(),b&&b.c(),O(s,"type","file"),O(e,"slot","left")},m(_,B){E(_,e,B),D(t,e,null),k(e,o),k(e,n),k(n,l),k(n,i),k(n,p),k(n,s),a[14](s),k(e,f),D(r,e,null),k(e,w),g&&g.m(e,null),k(e,M),b&&b.m(e,null),L=!0,m||(y=N(s,"change",a[10]),m=!0)},p(_,B){const c={};!d&&B&1&&(d=!0,c.example=_[0],H(()=>d=!1)),r.$set(c),_[4]?g?(g.p(_,B),B&16&&h(g,1)):(g=$(_),g.c(),h(g,1),g.m(e,M)):g&&(V(),v(g,1,1,()=>{g=null}),X()),_[6].metadata?b?(b.p(_,B),B&64&&h(b,1)):(b=x(_),b.c(),h(b,1),b.m(e,null)):b&&(V(),v(b,1,1,()=>{b=null}),X())},i(_){L||(h(t.$$.fragment,_),h(r.$$.fragment,_),h(g),h(b),L=!0)},o(_){v(t.$$.fragment,_),v(r.$$.fragment,_),v(g),v(b),L=!1},d(_){_&&I(e),q(t),a[14](null),q(r),g&&g.d(),b&&b.d(),m=!1,y()}}}function Te(a){let e,t;return{c(){e=new Me(!1),t=ke(),e.a=t},m(o,n){e.m(Ae,o,n),E(o,t,n)},p:se,d(o){o&&(I(t),e.d())}}}function Fe(a){let e,t;return e=new Je({props:{controls:a[9]}}),{c(){S(e.$$.fragment)},m(o,n){D(e,o,n),t=!0},p:se,i(o){t||(h(e.$$.fragment,o),t=!0)},o(o){v(e.$$.fragment,o),t=!1},d(o){q(e,o)}}}function Ze(a){let e,t,o,n,l;function i(s){a[12](s)}let p={draggable:!0,$$slots:{default:[Te]},$$scope:{ctx:a}};return a[5]!==void 0&&(p.lngLat=a[5]),e=new je({props:p}),Z.push(()=>G(e,"lngLat",i)),e.$on("dragend",a[11]),n=new De({props:{data:a[6],$$slots:{default:[Fe]},$$scope:{ctx:a}}}),{c(){S(e.$$.fragment),o=P(),S(n.$$.fragment)},m(s,f){D(e,s,f),E(s,o,f),D(n,s,f),l=!0},p(s,f){const r={};f&1048576&&(r.$$scope={dirty:f,ctx:s}),!t&&f&32&&(t=!0,r.lngLat=s[5],H(()=>t=!1)),e.$set(r);const d={};f&64&&(d.data=s[6]),f&1048576&&(d.$$scope={dirty:f,ctx:s}),n.$set(d)},i(s){l||(h(e.$$.fragment,s),h(n.$$.fragment,s),l=!0)},o(s){v(e.$$.fragment,s),v(n.$$.fragment,s),l=!1},d(s){s&&I(o),q(e,s),q(n,s)}}}function Ge(a){let e,t,o,n;function l(p){a[13](p)}let i={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Ze]},$$scope:{ctx:a}};return a[3]!==void 0&&(i.map=a[3]),t=new ve({props:i}),Z.push(()=>G(t,"map",l)),{c(){e=z("div"),S(t.$$.fragment),O(e,"slot","main"),F(e,"position","relative"),F(e,"width","100%"),F(e,"height","100vh")},m(p,s){E(p,e,s),D(t,e,null),n=!0},p(p,s){const f={};s&1048672&&(f.$$scope={dirty:s,ctx:p}),!o&&s&8&&(o=!0,f.map=p[3],H(()=>o=!1)),t.$set(f)},i(p){n||(h(t.$$.fragment,p),n=!0)},o(p){v(t.$$.fragment,p),n=!1},d(p){p&&I(e),q(t)}}}function He(a){let e,t,o,n;return e=new we({props:{$$slots:{main:[Ge],left:[Re]},$$scope:{ctx:a}}}),o=new Be({props:{loading:a[7]}}),{c(){S(e.$$.fragment),t=P(),S(o.$$.fragment)},m(l,i){D(e,l,i),E(l,t,i),D(o,l,i),n=!0},p(l,[i]){const p={};i&1048959&&(p.$$scope={dirty:i,ctx:l}),e.$set(p);const s={};i&128&&(s.loading=l[7]),o.$set(s)},i(l){n||(h(e.$$.fragment,l),h(o.$$.fragment,l),n=!0)},o(l){v(e.$$.fragment,l),v(o.$$.fragment,l),n=!1},d(l){l&&I(t),q(e,l),q(o,l)}}}function Ke(a,e,t){Le(async()=>{await Ee(),await Ce()});let o,n,l="",i={lng:0,lat:0},p={type:"FeatureCollection",features:[]},s=!1,f=1e3,r="Distance",d={maxCount:1e3,originRadius:3,destinationRadius:3,streetviewOn:!1},w;async function M(c){t(0,l=""),t(7,s=!0),L(await w.files[0].arrayBuffer())}function L(c){try{t(4,n=new Ie(new Uint8Array(c))),t(2,r="Distance");let C=n.getBounds();o.fitBounds([[C[0],C[1]],[C[2],C[3]]],{padding:20,animate:!1}),t(5,i.lng=(C[0]+C[2])/2,i),t(5,i.lat=(C[1]+C[3])/2,i),y()}catch(C){window.alert(`Problem importing osm.pbf file: ${C}`)}t(7,s=!1)}async function m(c){if(c!=""){t(7,s=!0);let C=await fetch(`https://assets.od2net.org/pbf_clips/${c}.osm.pbf`);L(await C.arrayBuffer())}}function y(){n&&t(6,p=JSON.parse(n.recalculate({lng:i.lng,lat:i.lat,max_requests:f,cost:r})))}function J(c){i=c,t(5,i)}function j(c){o=c,t(3,o)}function g(c){Z[c?"unshift":"push"](()=>{w=c,t(8,w)})}function b(c){l=c,t(0,l)}function _(){f=ae(this.value),t(1,f)}function B(c){r=c,t(2,r)}return a.$$.update=()=>{a.$$.dirty&1&&m(l),a.$$.dirty&6&&y()},[l,f,r,o,n,i,p,s,w,d,M,y,J,j,g,b,_,B]}class Ue extends ee{constructor(e){super(),te(this,e,Ke,He,ne,{})}}new Ue({target:document.getElementById("app")});
