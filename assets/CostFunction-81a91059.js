import{ae as me,af as he,S as ue,i as fe,s as $,D as ee,l as T,t as C,r as ae,b as L,u as le,v as M,ag as pe,T as P,a7 as ke,U as V,ah as te,E as Y,G as Se,J as ve,K as je,N as Ae,Y as Oe,e as k,g as be,f as ge,j as B,k as Te,n as S,p as ne,q as Q,aa as re,ab as Me,h as z,a6 as Ie,V as de,w as Ce,C as Fe}from"./Legend-4afc4d67.js";function Ee(t,e,n,r,o){let i=!1;t.getSource(e)&&(i=!0,t.removeSource(e));const _=()=>{r(e)&&(t.addSource(e,n),o())};if(i){const s=()=>{e&&(t.getSource(e)?setTimeout(s,1):_())};s()}else _()}function We(t,e,n){me().then(()=>{let r=he(t);if(!r)return;r.getSource(e)===n&&r.removeSource(e)})}function oe(t){let e=t[0],n,r,o=ie(t);return{c(){o.c(),n=ee()},m(i,_){o.m(i,_),T(i,n,_),r=!0},p(i,_){_&1&&$(e,e=i[0])?(ae(),L(o,1,1,Y),le(),o=ie(i),o.c(),C(o,1),o.m(n.parentNode,n)):o.p(i,_)},i(i){r||(C(o),r=!0)},o(i){L(o),r=!1},d(i){i&&M(n),o.d(i)}}}function ie(t){let e;const n=t[15].default,r=Se(n,t,t[14],null);return{c(){r&&r.c()},m(o,i){r&&r.m(o,i),e=!0},p(o,i){r&&r.p&&(!e||i&16384)&&ve(r,n,o,o[14],e?Ae(n,o[14],i,null):je(o[14]),null)},i(o){e||(C(r,o),e=!0)},o(o){L(r,o),e=!1},d(o){r&&r.d(o)}}}function Ne(t){let e,n,r=t[0]&&oe(t);return{c(){r&&r.c(),e=ee()},m(o,i){r&&r.m(o,i),T(o,e,i),n=!0},p(o,[i]){o[0]?r?(r.p(o,i),i&1&&C(r,1)):(r=oe(o),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(ae(),L(r,1,1,()=>{r=null}),le())},i(o){n||(C(r),n=!0)},o(o){L(r),n=!1},d(o){o&&M(e),r&&r.d(o)}}}function Re(t,e,n){let r,o,i,{$$slots:_={},$$scope:s}=e,{id:b=Oe("geojson")}=e,{data:g}=e,{generateId:a=!1}=e,{promoteId:h=void 0}=e,{filter:y=void 0}=e,{lineMetrics:m=void 0}=e,{cluster:f=void 0}=e;const{map:G,cluster:J,self:H}=pe();P(t,G,d=>n(13,o=d)),P(t,J,d=>n(16,i=d)),P(t,H,d=>n(0,r=d));let p,q=!0;return ke(()=>{r&&p&&o&&(We(G,r,p),V(H,r=null,r),n(11,p=void 0))}),t.$$set=d=>{"id"in d&&n(4,b=d.id),"data"in d&&n(5,g=d.data),"generateId"in d&&n(6,a=d.generateId),"promoteId"in d&&n(7,h=d.promoteId),"filter"in d&&n(8,y=d.filter),"lineMetrics"in d&&n(9,m=d.lineMetrics),"cluster"in d&&n(10,f=d.cluster),"$$scope"in d&&n(14,s=d.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&V(J,i=f,i),t.$$.dirty&12273&&o&&r!==b&&(V(H,r=b,r),Ee(o,r,te({type:"geojson",data:g,filter:y,lineMetrics:m,generateId:a,promoteId:h,cluster:!!f,clusterMinPoints:f==null?void 0:f.minPoints,clusterMaxZoom:f==null?void 0:f.maxZoom,clusterRadius:f==null?void 0:f.radius,clusterProperties:f==null?void 0:f.properties}),d=>o&&d===r,()=>{r&&(n(11,p=o==null?void 0:o.getSource(r)),n(12,q=!0))})),t.$$.dirty&8208&&(o==null||o.on("style.load",()=>{n(11,p=o==null?void 0:o.getSource(b))})),t.$$.dirty&6176&&p&&(q?n(12,q=!1):p.setData(g)),t.$$.dirty&3072&&(p==null||p.setClusterOptions(te({cluster:!!f,clusterMaxZoom:f==null?void 0:f.maxZoom,clusterRadius:f==null?void 0:f.radius})))},[r,G,J,H,b,g,a,h,y,m,f,p,q,o,s,_]}class Ke extends ue{constructor(e){super(),fe(this,e,Re,Ne,$,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}let u;const we=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&we.decode();let E=null;function D(){return(E===null||E.byteLength===0)&&(E=new Uint8Array(u.memory.buffer)),E}function O(t,e){return t=t>>>0,we.decode(D().subarray(t,t+e))}const v=new Array(128).fill(void 0);v.push(void 0,null,!0,!1);let U=v.length;function l(t){U===v.length&&v.push(v.length+1);const e=U;return U=v[e],v[e]=t,e}function c(t){return v[t]}let I=0;const Z=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Be=typeof Z.encodeInto=="function"?function(t,e){return Z.encodeInto(t,e)}:function(t,e){const n=Z.encode(t);return e.set(n),{read:t.length,written:n.length}};function K(t,e,n){if(n===void 0){const s=Z.encode(t),b=e(s.length,1)>>>0;return D().subarray(b,b+s.length).set(s),I=s.length,b}let r=t.length,o=e(r,1)>>>0;const i=D();let _=0;for(;_<r;_++){const s=t.charCodeAt(_);if(s>127)break;i[o+_]=s}if(_!==r){_!==0&&(t=t.slice(_)),o=n(o,r,r=_+t.length*3,1)>>>0;const s=D().subarray(o+_,o+r),b=Be(t,s);_+=b.written}return I=_,o}function F(t){return t==null}let W=null;function w(){return(W===null||W.byteLength===0)&&(W=new Int32Array(u.memory.buffer)),W}function De(t){t<132||(v[t]=U,U=t)}function j(t){const e=c(t);return De(t),e}let N=null;function ye(){return(N===null||N.byteLength===0)&&(N=new Float64Array(u.memory.buffer)),N}let R=null;function Ue(){return(R===null||R.byteLength===0)&&(R=new BigInt64Array(u.memory.buffer)),R}function X(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const o=t.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=t.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(t)){const o=t.length;let i="[";o>0&&(i+=X(t[0]));for(let _=1;_<o;_++)i+=", "+X(t[_]);return i+="]",i}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function Le(t,e){const n=e(t.length*1,1)>>>0;return D().set(t,n/1),I=t.length,n}function He(t,e){return t=t>>>0,ye().subarray(t/8,t/8+e)}function A(t,e){try{return t.apply(this,e)}catch(n){u.__wbindgen_exn_store(l(n))}}class x{static __wrap(e){e=e>>>0;const n=Object.create(x.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();u.__wbg_jsnetwork_free(e)}constructor(e){try{const i=u.__wbindgen_add_to_stack_pointer(-16),_=Le(e,u.__wbindgen_malloc),s=I;u.jsnetwork_new(i,_,s);var n=w()[i/4+0],r=w()[i/4+1],o=w()[i/4+2];if(o)throw j(r);return x.__wrap(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}recalculate(e){let n,r;try{const a=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_recalculate(a,this.__wbg_ptr,l(e));var o=w()[a/4+0],i=w()[a/4+1],_=w()[a/4+2],s=w()[a/4+3],b=o,g=i;if(s)throw b=0,g=0,j(_);return n=b,r=g,O(b,g)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_free(n,r,1)}}updateCostFunction(e){try{const o=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_updateCostFunction(o,this.__wbg_ptr,l(e));var n=w()[o/4+0],r=w()[o/4+1];if(r)throw j(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}getBounds(){try{const o=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_getBounds(o,this.__wbg_ptr);var e=w()[o/4+0],n=w()[o/4+1],r=He(e,n).slice();return u.__wbindgen_free(e,n*8),r}finally{u.__wbindgen_add_to_stack_pointer(16)}}debugNetwork(){let e,n;try{const g=u.__wbindgen_add_to_stack_pointer(-16);u.jsnetwork_debugNetwork(g,this.__wbg_ptr);var r=w()[g/4+0],o=w()[g/4+1],i=w()[g/4+2],_=w()[g/4+3],s=r,b=o;if(_)throw s=0,b=0,j(i);return e=s,n=b,O(s,b)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_free(e,n,1)}}}async function qe(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Ze(){const t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(e,n){const r=O(e,n);return l(r)},t.wbg.__wbindgen_string_get=function(e,n){const r=c(n),o=typeof r=="string"?r:void 0;var i=F(o)?0:K(o,u.__wbindgen_malloc,u.__wbindgen_realloc),_=I;w()[e/4+1]=_,w()[e/4+0]=i},t.wbg.__wbindgen_object_drop_ref=function(e){j(e)},t.wbg.__wbindgen_number_get=function(e,n){const r=c(n),o=typeof r=="number"?r:void 0;ye()[e/8+1]=F(o)?0:o,w()[e/4+0]=!F(o)},t.wbg.__wbindgen_is_string=function(e){return typeof c(e)=="string"},t.wbg.__wbindgen_is_object=function(e){const n=c(e);return typeof n=="object"&&n!==null},t.wbg.__wbindgen_is_undefined=function(e){return c(e)===void 0},t.wbg.__wbindgen_in=function(e,n){return c(e)in c(n)},t.wbg.__wbindgen_is_bigint=function(e){return typeof c(e)=="bigint"},t.wbg.__wbindgen_bigint_from_u64=function(e){const n=BigInt.asUintN(64,e);return l(n)},t.wbg.__wbindgen_jsval_eq=function(e,n){return c(e)===c(n)},t.wbg.__wbindgen_error_new=function(e,n){const r=new Error(O(e,n));return l(r)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=c(e);return l(n)},t.wbg.__wbindgen_jsval_loose_eq=function(e,n){return c(e)==c(n)},t.wbg.__wbindgen_boolean_get=function(e){const n=c(e);return typeof n=="boolean"?n?1:0:2},t.wbg.__wbindgen_number_new=function(e){return l(e)},t.wbg.__wbg_getwithrefkey_3b3c46ba20582127=function(e,n){const r=c(e)[c(n)];return l(r)},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return l(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const r=c(n).stack,o=K(r,u.__wbindgen_malloc,u.__wbindgen_realloc),i=I;w()[e/4+1]=i,w()[e/4+0]=o},t.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let r,o;try{r=e,o=n,console.error(O(e,n))}finally{u.__wbindgen_free(r,o,1)}},t.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(e,n){const r=c(e)[c(n)];return l(r)},t.wbg.__wbg_set_841ac57cff3d672b=function(e,n,r){c(e)[j(n)]=j(r)},t.wbg.__wbg_now_0cfdc90c97d0c24b=function(e){return c(e).now()},t.wbg.__wbg_debug_9a6b3243fbbebb61=function(e){console.debug(c(e))},t.wbg.__wbg_error_788ae33f81d3b84b=function(e){console.error(c(e))},t.wbg.__wbg_info_2e30e8204b29d91d=function(e){console.info(c(e))},t.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(c(e))},t.wbg.__wbg_warn_d60e832f9882c1b2=function(e){console.warn(c(e))},t.wbg.__wbg_get_44be0491f933a435=function(e,n){const r=c(e)[n>>>0];return l(r)},t.wbg.__wbg_length_fff51ee6522a1a18=function(e){return c(e).length},t.wbg.__wbg_new_898a68150f225f2e=function(){const e=new Array;return l(e)},t.wbg.__wbindgen_is_function=function(e){return typeof c(e)=="function"},t.wbg.__wbg_newnoargs_581967eacc0e2604=function(e,n){const r=new Function(O(e,n));return l(r)},t.wbg.__wbg_next_526fc47e980da008=function(e){const n=c(e).next;return l(n)},t.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return A(function(e){const n=c(e).next();return l(n)},arguments)},t.wbg.__wbg_done_5c1f01fb660d73b5=function(e){return c(e).done},t.wbg.__wbg_value_1695675138684bd5=function(e){const n=c(e).value;return l(n)},t.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return l(Symbol.iterator)},t.wbg.__wbg_get_97b561fb56f034b5=function(){return A(function(e,n){const r=Reflect.get(c(e),c(n));return l(r)},arguments)},t.wbg.__wbg_call_cb65541d95d71282=function(){return A(function(e,n){const r=c(e).call(c(n));return l(r)},arguments)},t.wbg.__wbg_new_b51585de1b234aff=function(){const e=new Object;return l(e)},t.wbg.__wbg_self_1ff1d729e9aae938=function(){return A(function(){const e=self.self;return l(e)},arguments)},t.wbg.__wbg_window_5f4faef6c12b79ec=function(){return A(function(){const e=window.window;return l(e)},arguments)},t.wbg.__wbg_globalThis_1d39714405582d3c=function(){return A(function(){const e=globalThis.globalThis;return l(e)},arguments)},t.wbg.__wbg_global_651f05c6a0944d1c=function(){return A(function(){const e=global.global;return l(e)},arguments)},t.wbg.__wbg_set_502d29070ea18557=function(e,n,r){c(e)[n>>>0]=j(r)},t.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(e){let n;try{n=c(e)instanceof ArrayBuffer}catch{n=!1}return n},t.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(e){return Number.isSafeInteger(c(e))},t.wbg.__wbg_entries_e51f29c7bba0c054=function(e){const n=Object.entries(c(e));return l(n)},t.wbg.__wbg_buffer_085ec1f694018c4f=function(e){const n=c(e).buffer;return l(n)},t.wbg.__wbg_new_8125e318e6245eed=function(e){const n=new Uint8Array(c(e));return l(n)},t.wbg.__wbg_set_5cf90238115182c3=function(e,n,r){c(e).set(c(n),r>>>0)},t.wbg.__wbg_length_72e2208bbc0efc61=function(e){return c(e).length},t.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(e){let n;try{n=c(e)instanceof Uint8Array}catch{n=!1}return n},t.wbg.__wbindgen_bigint_get_as_i64=function(e,n){const r=c(n),o=typeof r=="bigint"?r:void 0;Ue()[e/8+1]=F(o)?BigInt(0):o,w()[e/4+0]=!F(o)},t.wbg.__wbindgen_debug_string=function(e,n){const r=X(c(n)),o=K(r,u.__wbindgen_malloc,u.__wbindgen_realloc),i=I;w()[e/4+1]=i,w()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,n){throw new Error(O(e,n))},t.wbg.__wbindgen_memory=function(){const e=u.memory;return l(e)},t}function Ge(t,e){return u=t.exports,Je.__wbindgen_wasm_module=e,R=null,N=null,W=null,E=null,u}async function Je(t){if(u!==void 0)return u;typeof t>"u"&&(t="/od2net/assets/wasm_od2net_bg.wasm");const e=Ze();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await qe(await t,e);return Ge(n,r)}function _e(t,e,n){const r=t.slice();return r[7]=e[n],r[8]=e,r[9]=n,r}function ce(t){let e,n=re(Object.keys(t[2])),r=[];for(let o=0;o<n.length;o+=1)r[o]=se(_e(t,n,o));return{c(){e=k("ul");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,i){T(o,e,i);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(e,null)},p(o,i){if(i&5){n=re(Object.keys(o[2]));let _;for(_=0;_<n.length;_+=1){const s=_e(o,n,_);r[_]?r[_].p(s,i):(r[_]=se(s),r[_].c(),r[_].m(e,null))}for(;_<r.length;_+=1)r[_].d(1);r.length=n.length}},d(o){o&&M(e),Me(r,o)}}}function se(t){let e,n,r=t[7]+"",o,i,_,s,b;function g(){t[4].call(i,t[7])}return{c(){e=k("li"),n=k("label"),o=be(r),i=k("input"),_=ge(),z(i,"type","number"),z(i,"min","1.0"),z(i,"step","0.1")},m(a,h){T(a,e,h),S(e,n),S(n,o),S(n,i),B(i,t[2][t[7]]),S(e,_),s||(b=[Q(i,"input",g),Q(i,"change",t[5])],s=!0)},p(a,h){t=a,h&4&&r!==(r=t[7]+"")&&Ie(o,r),h&4&&de(i.value)!==t[2][t[7]]&&B(i,t[2][t[7]])},d(a){a&&M(e),s=!1,Ce(b)}}}function Pe(t){let e,n,r,o,i,_,s,b,g,a,h,y=t[1]=="OsmHighwayType"&&ce(t);return{c(){e=k("div"),n=k("label"),r=be(`Cost function:
    `),o=k("select"),i=k("option"),i.textContent="Distance",_=k("option"),_.textContent="Avoid main roads",s=k("option"),s.textContent="Set a weight per OSM highway type",b=ge(),y&&y.c(),g=ee(),i.__value="Distance",B(i,i.__value),_.__value="AvoidMainRoads",B(_,_.__value),s.__value="OsmHighwayType",B(s,s.__value),t[1]===void 0&&Te(()=>t[3].call(o))},m(m,f){T(m,e,f),S(e,n),S(n,r),S(n,o),S(o,i),S(o,_),S(o,s),ne(o,t[1],!0),T(m,b,f),y&&y.m(m,f),T(m,g,f),a||(h=Q(o,"change",t[3]),a=!0)},p(m,[f]){f&2&&ne(o,m[1]),m[1]=="OsmHighwayType"?y?y.p(m,f):(y=ce(m),y.c(),y.m(g.parentNode,g)):y&&(y.d(1),y=null)},i:Y,o:Y,d(m){m&&(M(e),M(b),M(g)),y&&y.d(m),a=!1,h()}}}function Ve(t,e,n){let{cost:r}=e,o="Distance",i={};for(let a of["cycleway","footway","living_street","motorway","motorway_link","path","pedestrian","primary","primary_link","residential","secondary","secondary_link","service","steps","tertiary","tertiary_link","track","trunk","trunk_link","unclassified"])i[a]=1;function _(a){a=="OsmHighwayType"?n(0,r={OsmHighwayType:i}):n(0,r=a)}function s(){o=Fe(this),n(1,o)}function b(a){i[a]=de(this.value),n(2,i)}const g=()=>n(0,r);return t.$$set=a=>{"cost"in a&&n(0,r=a.cost)},t.$$.update=()=>{t.$$.dirty&2&&_(o)},[r,o,i,s,b,g]}class Ye extends ue{constructor(e){super(),fe(this,e,Ve,Pe,$,{cost:0})}}export{Ye as C,Ke as G,x as J,Je as _};
