import{S as x,i as ee,s as te,G as ue,e as B,h as I,z as T,l as S,I as U,q as E,J as ce,K as de,N as pe,O as me,t as w,b as C,v as D,w as ge,Q as _e,R as be,T as H,U as W,m as he,L as we,c as q,a as J,d as N,o as Le,H as ve,x as F,y as Z,f as P,g as K,n as y,A as G,r as Q,u as V,M as ye,_ as Ce,V as ne,j as X,E as ae,D as ke,W as Me}from"./Legend-4a68f35f.js";import{C as Be,_ as ze,J as Ee,a as Ie,G as Se}from"./CostFunction-20018123.js";import{S as De,L as qe}from"./SidebarControls-3a377a6d.js";function Je(a){let e,n,s,t,o,u,c;const l=a[16].default,i=ue(l,a,a[15],null);return{c(){e=B("div"),i&&i.c(),I(e,"tabindex",n=a[1]?0:void 0),I(e,"role",s=a[1]?"button":void 0),T(e,"z-index",a[2])},m(r,d){S(r,e,d),i&&i.m(e,null),o=!0,u||(c=[U(a[6].call(null,e)),U(t=Ne.call(null,e,a[0])),E(e,"click",a[17]),E(e,"dblclick",a[18]),E(e,"contextmenu",a[19]),E(e,"mouseenter",a[20]),E(e,"mouseleave",a[21]),E(e,"mousemove",a[22]),E(e,"keydown",a[7])],u=!0)},p(r,[d]){i&&i.p&&(!o||d&32768)&&ce(i,l,r,r[15],o?pe(l,r[15],d,null):de(r[15]),null),(!o||d&2&&n!==(n=r[1]?0:void 0))&&I(e,"tabindex",n),(!o||d&2&&s!==(s=r[1]?"button":void 0))&&I(e,"role",s),t&&me(t.update)&&d&1&&t.update.call(null,r[0]),d&4&&T(e,"z-index",r[2])},i(r){o||(w(i,r),o=!0)},o(r){C(i,r),o=!1},d(r){r&&D(e),i&&i.d(r),u=!1,ge(c)}}}function Ne(a,e){const n=a.className;function s(t){t?a.className=`${n} ${t}`:a.className=n}return s(e),{update:s}}function Oe(a,e,n){let s,t,o,{$$slots:u={},$$scope:c}=e,{lngLat:l}=e,{class:i=void 0}=e,{interactive:r=!0}=e,{asButton:d=!1}=e,{draggable:k=!1}=e,{feature:L=null}=e,{offset:v=void 0}=e,{zIndex:p=void 0}=e;const M=_e(),{map:z,layerEvent:O,self:_}=be();H(a,z,f=>n(24,o=f)),H(a,O,f=>n(23,s=f)),H(a,_,f=>n(14,t=f));function h(f){W(_,t=new he.Marker({element:f,draggable:k,offset:v}).setLngLat(l).addTo(o),t);const j=()=>m("dragstart"),A=()=>{b(),m("drag")},R=()=>{b(),m("dragend")};return k&&(t.on("dragstart",j),t.on("drag",A),t.on("dragend",R)),{destroy(){k&&(t==null||t.off("dragstart",j),t==null||t.off("drag",A),t==null||t.off("dragend",R)),t==null||t.remove()}}}function b(){let f=t==null?void 0:t.getLngLat();f&&(Array.isArray(l)?n(9,l=[f.lng,f.lat]):l&&"lon"in l?n(9,l={lon:f.lng,lat:f.lat}):n(9,l=f))}function g(f){f.key===" "&&(f.preventDefault(),f.stopPropagation(),m("click"))}function m(f){if(!r)return;let j=t==null?void 0:t.getLngLat();if(!j)return;const A=[j.lng,j.lat];let R={map:o,marker:t,lngLat:A,features:[{type:"Feature",properties:(L==null?void 0:L.properties)??{},geometry:{type:"Point",coordinates:A}}]};W(O,s={...R,layerType:"marker",type:f},s),M(f,R)}const se=()=>m("click"),le=()=>m("dblclick"),oe=()=>m("contextmenu"),ie=f=>{m("mouseenter")},re=()=>{m("mouseleave")},fe=()=>m("mousemove");return a.$$set=f=>{"lngLat"in f&&n(9,l=f.lngLat),"class"in f&&n(0,i=f.class),"interactive"in f&&n(10,r=f.interactive),"asButton"in f&&n(1,d=f.asButton),"draggable"in f&&n(11,k=f.draggable),"feature"in f&&n(12,L=f.feature),"offset"in f&&n(13,v=f.offset),"zIndex"in f&&n(2,p=f.zIndex),"$$scope"in f&&n(15,c=f.$$scope)},a.$$.update=()=>{a.$$.dirty&16896&&(t==null||t.setLngLat(l)),a.$$.dirty&24576&&(t==null||t.setOffset(v??[0,0]))},[i,d,p,z,O,_,h,g,m,l,r,k,L,v,t,c,u,se,le,oe,ie,re,fe]}class Pe extends x{constructor(e){super(),ee(this,e,Oe,Je,te,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2})}}const je=`<svg width="40" height="50" viewBox="0 0 40 50" xmlns="http://www.w3.org/2000/svg">
    <defs/>
    <path id="path2" fill="none" stroke="none" visibility="hidden" d="M 1.0169492 25.59322 L 25.016949 25.59322 L 25.016949 49.59322 L 1.0169492 49.59322 Z"/>
    <path id="path4" fill="#000000" stroke="none" d="M 19.198305 2.6101693 C 10.336661 2.6101693 3.1694916 9.7773384 3.1694916 18.638983 C 3.1694916 30.660593 19.198305 48.406779 19.198305 48.406779 C 19.198305 48.406779 35.227118 30.660593 35.227118 18.638983 C 35.227118 9.7773384 28.059949 2.6101693 19.198305 2.6101693 Z M 19.198305 24.363559 C 16.038339 24.363559 13.473728 21.798949 13.473728 18.638983 C 13.473728 15.479016 16.038339 12.914406 19.198305 12.914406 C 22.358271 12.914406 24.922881 15.479016 24.922881 18.638983 C 24.922881 21.798949 22.358271 24.363559 19.198305 24.363559 Z"/>
</svg>
`;function Y(a){let e,n,s,t,o,u,c,l,i,r,d,k;function L(p){a[16](p)}let v={};return a[2]!==void 0&&(v.cost=a[2]),l=new Ie({props:v}),F.push(()=>Z(l,"cost",L)),{c(){e=B("div"),n=B("label"),s=K("Max requests (limit for faster updates):"),t=B("br"),o=P(),u=B("input"),c=P(),q(l.$$.fragment),I(u,"type","number"),I(u,"min",1)},m(p,M){S(p,e,M),y(e,n),y(n,s),y(n,t),y(n,o),y(n,u),X(u,a[1]),S(p,c,M),J(l,p,M),r=!0,d||(k=E(u,"input",a[15]),d=!0)},p(p,M){M&2&&ne(u.value)!==p[1]&&X(u,p[1]);const z={};!i&&M&4&&(i=!0,z.cost=p[2],G(()=>i=!1)),l.$set(z)},i(p){r||(w(l.$$.fragment,p),r=!0)},o(p){C(l.$$.fragment,p),r=!1},d(p){p&&(D(e),D(c)),N(l,p),d=!1,k()}}}function $(a){let e,n,s,t;return s=new De({props:{outputMetadata:a[6].metadata,map:a[3],controls:a[8]}}),{c(){e=B("hr"),n=P(),q(s.$$.fragment)},m(o,u){S(o,e,u),S(o,n,u),J(s,o,u),t=!0},p(o,u){const c={};u&64&&(c.outputMetadata=o[6].metadata),u&8&&(c.map=o[3]),s.$set(c)},i(o){t||(w(s.$$.fragment,o),t=!0)},o(o){C(s.$$.fragment,o),t=!1},d(o){o&&(D(e),D(n)),N(s,o)}}}function Ae(a){let e,n,s,t,o,u,c,l,i,r,d,k,L,v,p,M;n=new ve({props:{app:"interactive"}});function z(b){a[14](b)}let O={};a[0]!==void 0&&(O.example=a[0]),r=new Be({props:O}),F.push(()=>Z(r,"example",z));let _=a[4]&&Y(a),h=a[6].metadata&&$(a);return{c(){e=B("div"),q(n.$$.fragment),s=P(),t=B("label"),o=K("Open an "),u=B("i"),u.textContent=".osm.pbf",c=K(` file
      `),l=B("input"),i=P(),q(r.$$.fragment),k=P(),_&&_.c(),L=P(),h&&h.c(),I(l,"type","file"),I(e,"slot","left")},m(b,g){S(b,e,g),J(n,e,null),y(e,s),y(e,t),y(t,o),y(t,u),y(t,c),y(t,l),a[13](l),y(e,i),J(r,e,null),y(e,k),_&&_.m(e,null),y(e,L),h&&h.m(e,null),v=!0,p||(M=E(l,"change",a[9]),p=!0)},p(b,g){const m={};!d&&g&1&&(d=!0,m.example=b[0],G(()=>d=!1)),r.$set(m),b[4]?_?(_.p(b,g),g&16&&w(_,1)):(_=Y(b),_.c(),w(_,1),_.m(e,L)):_&&(Q(),C(_,1,1,()=>{_=null}),V()),b[6].metadata?h?(h.p(b,g),g&64&&w(h,1)):(h=$(b),h.c(),w(h,1),h.m(e,null)):h&&(Q(),C(h,1,1,()=>{h=null}),V())},i(b){v||(w(n.$$.fragment,b),w(r.$$.fragment,b),w(_),w(h),v=!0)},o(b){C(n.$$.fragment,b),C(r.$$.fragment,b),C(_),C(h),v=!1},d(b){b&&D(e),N(n),a[13](null),N(r),_&&_.d(),h&&h.d(),p=!1,M()}}}function Re(a){let e,n;return{c(){e=new Me(!1),n=ke(),e.a=n},m(s,t){e.m(je,s,t),S(s,n,t)},p:ae,d(s){s&&(D(n),e.d())}}}function Te(a){let e,n;return e=new qe({props:{controls:a[8]}}),{c(){q(e.$$.fragment)},m(s,t){J(e,s,t),n=!0},p:ae,i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){C(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Fe(a){let e,n,s,t,o;function u(l){a[11](l)}let c={draggable:!0,$$slots:{default:[Re]},$$scope:{ctx:a}};return a[5]!==void 0&&(c.lngLat=a[5]),e=new Pe({props:c}),F.push(()=>Z(e,"lngLat",u)),e.$on("dragend",a[10]),t=new Se({props:{data:a[6],$$slots:{default:[Te]},$$scope:{ctx:a}}}),{c(){q(e.$$.fragment),s=P(),q(t.$$.fragment)},m(l,i){J(e,l,i),S(l,s,i),J(t,l,i),o=!0},p(l,i){const r={};i&524288&&(r.$$scope={dirty:i,ctx:l}),!n&&i&32&&(n=!0,r.lngLat=l[5],G(()=>n=!1)),e.$set(r);const d={};i&64&&(d.data=l[6]),i&524288&&(d.$$scope={dirty:i,ctx:l}),t.$set(d)},i(l){o||(w(e.$$.fragment,l),w(t.$$.fragment,l),o=!0)},o(l){C(e.$$.fragment,l),C(t.$$.fragment,l),o=!1},d(l){l&&D(s),N(e,l),N(t,l)}}}function Ze(a){let e,n,s,t;function o(c){a[12](c)}let u={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Fe]},$$scope:{ctx:a}};return a[3]!==void 0&&(u.map=a[3]),n=new ye({props:u}),F.push(()=>Z(n,"map",o)),{c(){e=B("div"),q(n.$$.fragment),I(e,"slot","main"),T(e,"position","relative"),T(e,"width","100%"),T(e,"height","100vh")},m(c,l){S(c,e,l),J(n,e,null),t=!0},p(c,l){const i={};l&524384&&(i.$$scope={dirty:l,ctx:c}),!s&&l&8&&(s=!0,i.map=c[3],G(()=>s=!1)),n.$set(i)},i(c){t||(w(n.$$.fragment,c),t=!0)},o(c){C(n.$$.fragment,c),t=!1},d(c){c&&D(e),N(n)}}}function Ge(a){let e,n;return e=new we({props:{$$slots:{main:[Ze],left:[Ae]},$$scope:{ctx:a}}}),{c(){q(e.$$.fragment)},m(s,t){J(e,s,t),n=!0},p(s,[t]){const o={};t&524543&&(o.$$scope={dirty:t,ctx:s}),e.$set(o)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){C(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function He(a,e,n){Le(async()=>{await ze(),await Ce()});let s,t,o="",u={lng:0,lat:0},c={type:"FeatureCollection",features:[]},l=1e3,i="Distance",r={maxCount:1e3,originRadius:3,destinationRadius:3,streetviewOn:!1},d;async function k(g){n(0,o=""),L(await d.files[0].arrayBuffer())}function L(g){try{n(4,t=new Ee(new Uint8Array(g))),n(2,i="Distance");let m=t.getBounds();s.fitBounds([[m[0],m[1]],[m[2],m[3]]],{padding:20,animate:!1}),n(5,u.lng=(m[0]+m[2])/2,u),n(5,u.lat=(m[1]+m[3])/2,u),p()}catch(m){window.alert(`Problem loading network file: ${m}`)}}async function v(g){if(g!=""){let m=await fetch(`https://assets.od2net.org/pbf_clips/${g}.osm.pbf`);L(await m.arrayBuffer())}}function p(){t&&n(6,c=JSON.parse(t.recalculate({lng:u.lng,lat:u.lat,max_requests:l,cost:i})))}function M(g){u=g,n(5,u)}function z(g){s=g,n(3,s)}function O(g){F[g?"unshift":"push"](()=>{d=g,n(7,d)})}function _(g){o=g,n(0,o)}function h(){l=ne(this.value),n(1,l)}function b(g){i=g,n(2,i)}return a.$$.update=()=>{a.$$.dirty&1&&v(o),a.$$.dirty&6&&p()},[o,l,i,s,t,u,c,d,r,k,p,M,z,O,_,h,b]}class Ke extends x{constructor(e){super(),ee(this,e,He,Ge,te,{})}}new Ke({target:document.getElementById("app")});
